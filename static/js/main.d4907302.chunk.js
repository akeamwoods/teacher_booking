(this.webpackJsonprm=this.webpackJsonprm||[]).push([[0],{160:function(e,n,t){e.exports=t(232)},231:function(e,n,t){},232:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(31),o=t.n(c),i=t(9),l=t(25),s=t(23),u=t(12),d=Object(u.createAction)("selected month changed")(),f=Object(u.createAction)("selected day changed")(),p=Object(u.createAction)("new lesson created")(),b=Object(u.createAction)("new series created")(),m=Object(u.createAction)("lesson edited")(),O=Object(u.createAction)("lesson edited with series added")(),g=Object(u.createAction)("lesson deleted")(),j=Object(u.createAction)("lesson unlinked")(),v=Object(u.createAction)("lesson focussed")(),y=Object(u.createAction)("lesson unfocussed")(),h={selectedMonthChanged:d,selectedDayChanged:f,newLessonCreated:p,newSeriesCreated:b,lessonEdited:m,lessonDeleted:g,lessonUnlinked:j,lessonFocussed:v,infoPanelClosed:Object(u.createAction)("info panel closed")(),lessonUnfocussed:y,closePanelButtonPressed:Object(u.createAction)("close panel button pressed")(),lessonEditedSeriesAdded:O,popupOpened:Object(u.createAction)("popup opened")(),popupClosed:Object(u.createAction)("popup closed")(),updateStartTime:Object(u.createAction)("lesson start time updated")(),seriesDeleted:Object(u.createAction)("series deleted")()},x=t(34),E=t(19),k=t(138),w=t(140),D=t(112),S=t(139),C=t.n(S),I=t(108),M=t(237),T=t(238),H=t(250),L=t(239),F=t(240),A=function(e){var n=["#f3225a","#22b7f3","#f3ab22","#3eb764","#4E22F3","#F32222","#F32293","#9B22F3"],t=e?[].concat(Object(l.a)(e),n):n;z(t);var a=t.reduce((function(e,n){return e[n]=(e[n]||0)+1,e}),{}),r=Object.keys(a).sort((function(e,n){return a[n]-a[e]}));return r[r.length-1]},z=function(e){for(var n=e.length-1;n>0;n--){var t=Math.floor(Math.random()*(n+1)),a=[e[t],e[n]];e[n]=a[0],e[t]=a[1]}},P=t(253),N=t(234),Y=t(76),B=t(235),V=t(236),R=function(e,n,t){var a=[],r=Object(N.a)(n);return Object.entries(e).forEach((function(e){if(e[1])for(var c=(function(e){var n=e.toLowerCase();return"monday"===n?1:"tuesday"===n?2:"wednesday"===n?3:"thursday"===n?4:"friday"===n?5:"saturday"===n?6:0}(e[0])-r+7)%7,o=Object(Y.a)(n,c);Object(B.a)(o,t)||Object(V.a)(o,t);)a.push(o),o=Object(Y.a)(o,7)})),a},U=function(e,n,t,a,r,c){e.forEach((function(e){var o=Object(I.a)(e).toISOString(),i=Object(s.a)(Object(s.a)({},n),{},{seriesId:n.seriesId?n.seriesId:c||void 0,id:Object(P.a)(),start:new Date(new Date(e.setHours(parseFloat(a))).setMinutes(parseFloat(a.slice(-2)))).toISOString(),end:new Date(new Date(e.setHours(parseFloat(r))).setMinutes(parseFloat(r.slice(-2)))).toISOString(),color:A(t[o]?t[o].map((function(e){return e.color})):[])});t[o]?t[o]=[].concat(Object(l.a)(t[o]),[i]):t[o]=[i]}))},_={key:"root",storage:C.a,blacklist:["selectedDate","focussedLesson","infoPanelOpen","popupOpen","infoPanelColor"]},G=function(){return{selectedDate:Object(I.a)(new Date).toISOString(),lessons:{},classes:[{id:"01",year:7,group:"A",students:[]}],focussedLesson:void 0,infoPanelOpen:!1,popupOpen:!1,infoPanelColor:void 0}},K=Object(D.a)(_,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G(),n=arguments.length>1?arguments[1]:void 0;return Object(w.a)(e,(function(e){switch(n.type){case Object(u.getType)(h.selectedMonthChanged):e.selectedDate=Object(M.a)(new Date(e.selectedDate),Object(T.a)(n.payload)).toISOString();break;case Object(u.getType)(h.selectedDayChanged):e.selectedDate=new Date(n.payload).toISOString();break;case Object(u.getType)(h.newLessonCreated):var t=Object(I.a)(new Date(n.payload.start)).toISOString(),a=Object(s.a)(Object(s.a)({},n.payload),{},{color:A(e.lessons[t]?e.lessons[t].map((function(e){return e.color})):[])});e.lessons[t]?e.lessons[t]=[].concat(Object(l.a)(e.lessons[t]),[a]):e.lessons[t]=[a];break;case Object(u.getType)(h.newSeriesCreated):var r="".concat(Object(H.a)(new Date(n.payload.lesson.start),"HH"),":").concat(Object(H.a)(new Date(n.payload.lesson.start),"mm")),c="".concat(Object(H.a)(new Date(n.payload.lesson.end),"HH"),":").concat(Object(H.a)(new Date(n.payload.lesson.end),"mm")),o=R(n.payload.series.days,n.payload.series.start,n.payload.series.end);U(o,n.payload.lesson,e.lessons,r,c);break;case Object(u.getType)(h.lessonEditedSeriesAdded):var d=Object(P.a)(),f="".concat(Object(H.a)(new Date(n.payload.lesson.start),"HH"),":").concat(Object(H.a)(new Date(n.payload.lesson.start),"mm")),p="".concat(Object(H.a)(new Date(n.payload.lesson.end),"HH"),":").concat(Object(H.a)(new Date(n.payload.lesson.end),"mm"));e.lessons[n.payload.oldKey]=Object(l.a)(e.lessons[n.payload.oldKey].filter((function(e){return e.id!==n.payload.lesson.id})));var b=R(n.payload.series.days,n.payload.series.start,n.payload.series.end);U(b,n.payload.lesson,e.lessons,f,p,d);break;case Object(u.getType)(h.lessonDeleted):e.lessons[n.payload.key]=Object(l.a)(e.lessons[n.payload.key].filter((function(e){return e.id!==n.payload.id}))),e.lessons[n.payload.key].length||delete e.lessons[n.payload.key],e.focussedLesson&&e.focussedLesson.id===n.payload.id&&(e.focussedLesson=void 0);break;case Object(u.getType)(h.lessonUnlinked):var m=e.lessons[n.payload.key].find((function(e){return e.seriesId===n.payload.id}));m&&(m.seriesId=void 0,e.focussedLesson&&e.focussedLesson.id===m.id&&(e.focussedLesson.seriesId=void 0));break;case Object(u.getType)(h.lessonFocussed):e.focussedLesson=n.payload,e.infoPanelColor=n.payload.color,e.infoPanelOpen=!0;break;case Object(u.getType)(h.lessonUnfocussed):e.focussedLesson=void 0;break;case Object(u.getType)(h.closePanelButtonPressed):e.infoPanelOpen=!1;break;case Object(u.getType)(h.lessonEdited):var O,g=n.payload.oldKey,j=Object(I.a)(new Date(n.payload.lesson.start)).toISOString();e.lessons[g]=Object(l.a)(e.lessons[g].filter((function(e){return e.id!==n.payload.lesson.id}))),e.lessons[j]?e.lessons[j]=[].concat(Object(l.a)(e.lessons[j]),[n.payload.lesson]):e.lessons[j]=[n.payload.lesson],(null===(O=e.focussedLesson)||void 0===O?void 0:O.id)===n.payload.lesson.id&&(e.focussedLesson=n.payload.lesson);break;case Object(u.getType)(h.popupOpened):e.popupOpen=!0;break;case Object(u.getType)(h.popupClosed):e.popupOpen=!1;break;case Object(u.getType)(h.updateStartTime):var v=e.lessons[Object(I.a)(new Date(n.payload.time)).toISOString()].find((function(e){return e.id===n.payload.id}));if(v){v.seriesId&&(v.seriesId=void 0);var y=Object(L.a)(new Date(v.end),new Date(v.start));v.start=n.payload.time,v.end=Object(F.a)(new Date(n.payload.time),y).toISOString(),e.focussedLesson&&e.focussedLesson.id===v.id&&(e.focussedLesson=v)}break;case Object(u.getType)(h.seriesDeleted):for(var x,E=0,k=Object.entries(e.lessons);E<k.length;E++){var w=Object(i.a)(k[E],1)[0];e.lessons[w]=e.lessons[w].filter((function(e){return e.seriesId!==n.payload})),e.lessons[w].length||delete e.lessons[w]}(null===(x=e.focussedLesson)||void 0===x?void 0:x.seriesId)&&e.focussedLesson.seriesId===n.payload&&(e.focussedLesson=void 0),e.popupOpen=!1}}))})),W=Object(x.createStore)(K,Object(k.composeWithDevTools)()),Z=(Object(D.b)(W),E.c),q=t(20),J=t(82),Q=t(249),X=t(151),$=t(1),ee=t(2);function ne(){var e=Object($.a)(["\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  overflow: auto;\n  padding: 30px 20px;\n  div::-webkit-scrollbar {\n    height: 0px;\n    width: 0px; /* Remove scrollbar space */\n    background: transparent; /* Optional: just make scrollbar invisible */\n  }\n"]);return ne=function(){return e},e}var te=ee.a.div(ne()),ae=t(141),re=function(e,n){var t=Object(N.a)(e);return[0,6].includes(t)?"repeating-linear-gradient(\n      135deg,\n      #f8f8f7,\n      #f8f8f7 2px,\n      #efefef 2px,\n      #efefef 4px\n    )":0===n?"#efefef":n<3?"#3eb764":n<5?"#f3ab22":"#f3225a"},ce=function(e,n){var t=Object(N.a)(e);return[0,6].includes(t)||0===n?"#000":"#fff"};function oe(){var e=Object($.a)(["\n  font-size: 0.7em;\n  color: #abb1b6;\n  padding-bottom: 15px;\n"]);return oe=function(){return e},e}function ie(){var e=Object($.a)(["\n  display: flex;\n  background: #e1e1e1;\n  padding: 25px;\n  border: none;\n  width: 30px;\n  height: 30px;\n  border-radius: 50%;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n"]);return ie=function(){return e},e}function le(){var e=Object($.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  flex: 1;\n  text-align: center;\n  cursor: pointer;\n  :not(:last-child) {\n    padding-right: 10px;\n  }\n  :not(:first-child) {\n    padding-left: 10px;\n  }\n  border-bottom: 2px solid;\n  margin: 0;\n"]);return le=function(){return e},e}function se(){var e=Object($.a)(["\n  display: flex;\n  overflow: auto;\n  min-width: 100%;\n  justify-content: space-between;\n"]);return se=function(){return e},e}var ue=ee.a.div(se()),de=ee.a.div.attrs((function(e){return{style:{borderBottomColor:e.isCurrentDay?"#2296f3":"#e1e1e1"}}}))(le()),fe=ee.a.button.attrs((function(e){return{style:{background:e.isCurrentDay?"#2296f3":re(e.day,e.lessons),color:e.isCurrentDay?"#fff":ce(e.day,e.lessons),boxShadow:e.isCurrentDay?"0 4px 8px 0 rgba(0,0,0,0.2)":"none"}}}))(ie()),pe=ee.a.p(oe()),be=r.a.memo((function(e){var n=e.startOfMonth,t=Object(ae.a)(new Date(n)),a=Array.from(Array(t),(function(e,t){return Object(Y.a)(Object(I.a)(new Date(n)),t).toISOString()}));return r.a.createElement(ue,null,a.map((function(e){return r.a.createElement(me,{key:e,day:e})})))})),me=r.a.memo((function(e){var n=e.day,t=Object(E.b)(),c=Object(a.createRef)(),o=Z((function(e){return e.selectedDate===n})),i=Z((function(e){return e.lessons[Object(I.a)(new Date(n)).toISOString()]}));return r.a.useEffect((function(){setTimeout((function(){o&&c.current&&c.current.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}),50)}),[o,c]),r.a.createElement(de,{ref:c,onClick:function(){t(h.selectedDayChanged(Object(I.a)(new Date(n))))},isCurrentDay:o},r.a.createElement(fe,{isCurrentDay:o,day:new Date(n),lessons:(null===i||void 0===i?void 0:i.length)?i.length:0},Object(H.a)(new Date(n),"d")),r.a.createElement(pe,null,Object(H.a)(new Date(n),"E")))})),Oe=t(145),ge=t(241);function je(){var e=Object($.a)(["\n  display: flex;\n  cursor: pointer;\n  font-size: 1.2em;\n  border: none;\n  background: transparent;\n  :not(:last-child) {\n    margin-right: 30px;\n  }\n"]);return je=function(){return e},e}function ve(){var e=Object($.a)(["\n  display: flex;\n  overflow: auto;\n  margin: 30px 0;\n  min-width: 100%;\n  justify-content: space-between;\n  font-size: 1.2em;\n"]);return ve=function(){return e},e}var ye=ee.a.div(ve()),he=ee.a.button.attrs((function(e){return{style:{fontWeight:e.isCurrentMonth?800:400}}}))(je()),xe=r.a.memo((function(e){var n=e.startOfYear,t=Array.from(Array(12),(function(e,t){return Object(Oe.a)(new Date(n),t)}));return r.a.createElement(ye,null,t.map((function(e){return r.a.createElement(Ee,{key:e.toISOString(),month:e})})))})),Ee=r.a.memo((function(e){var n=e.month,t=Object(E.b)(),c=Z((function(e){return Object(ge.a)(new Date(e.selectedDate),n)})),o=Object(a.createRef)();return r.a.useEffect((function(){setTimeout((function(){c&&o.current&&o.current.scrollIntoView({behavior:"auto",block:"center",inline:"center"})}),10)}),[c,o]),r.a.createElement(he,{isCurrentMonth:c,onClick:function(){t(h.selectedMonthChanged(n))},ref:o},Object(H.a)(n,"MMMM"))}));function ke(){var e=Object($.a)(["\n  bottom: 0;\n  border-bottom: 2px solid #e1e1e1;\n"]);return ke=function(){return e},e}function we(){var e=Object($.a)(["\n  bottom: 0;\n  border-bottom: 2px solid #e1e1e1;\n"]);return we=function(){return e},e}function De(){var e=Object($.a)(["\n  right: 0;\n  background: linear-gradient(\n    90deg,\n    rgba(255, 255, 255, 0),\n    rgba(255, 255, 255, 1)\n  );\n"]);return De=function(){return e},e}function Se(){var e=Object($.a)(["\n  position: absolute;\n  width: 50%;\n  height: 100%;\n  background: linear-gradient(\n    90deg,\n    rgba(255, 255, 255, 1),\n    rgba(255, 255, 255, 0)\n  );\n"]);return Se=function(){return e},e}function Ce(){var e=Object($.a)(["\n  display: flex;\n  position: relative;\n  pointer-events: none;\n"]);return Ce=function(){return e},e}function Ie(){var e=Object($.a)(["\n  background: #fff;\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  overflow: auto;\n  pointer-events: all;\n"]);return Ie=function(){return e},e}var Me=ee.a.div(Ie()),Te=(ee.a.div(Ce()),ee.a.div(Se())),He=Object(ee.a)(Te)(De()),Le=(Object(ee.a)(Te)(we()),Object(ee.a)(He)(ke()),t(247)),Fe=t(242);function Ae(){var e=Object($.a)(["\n  /* background: #ffce85; */\n"]);return Ae=function(){return e},e}function ze(){var e=Object($.a)(["\n  /* background: #dbf4ff; */\n"]);return ze=function(){return e},e}function Pe(){var e=Object($.a)(["\n  padding: 0 30px;\n  border-radius: 4px;\n  border: none;\n  font-size: 0.7em;\n  font-weight: 800;\n  background: white;\n  border: 1px solid #efedea;\n  margin-left: 10px;\n"]);return Pe=function(){return e},e}function Ne(){var e=Object($.a)(["\n  display: flex;\n  align-items: stretch;\n  justify-content: space-between;\n  padding: 0;\n  margin: 0;\n\n  h1,\n  h4 {\n    margin: 0;\n  }\n\n  span {\n    display: flex;\n    select {\n      padding: 0 15px;\n      margin: 0 10px;\n      border-color: #efedea;\n      border-radius: 4px;\n      font-weight: 800;\n    }\n  }\n"]);return Ne=function(){return e},e}var Ye=ee.a.header(Ne()),Be=ee.a.button(Pe()),Ve=Object(ee.a)(Be)(ze()),Re=Object(ee.a)(Be)(Ae()),Ue=t(36),_e=t(17);function Ge(){var e=Object($.a)(["\n  background: transparent;\n  border: none;\n  position: absolute;\n  right: 10px;\n  top: 10px;\n  padding: 0;\n"]);return Ge=function(){return e},e}function Ke(){var e=Object($.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  flex: 1;\n"]);return Ke=function(){return e},e}function We(){var e=Object($.a)(["\n  display: flex;\n  flex-direction: column;\n  background: #fff;\n  text-align: center;\n  align-items: center;\n  justify-content: center;\n  border-radius: 4px;\n  position: relative;\n  max-width: 80%;\n  max-height: 80%;\n  align-items: stretch;\n"]);return We=function(){return e},e}function Ze(){var e=Object($.a)(["\n  position: fixed;\n  display: flex;\n  flex-direction: column;\n  background: rgba(0, 0, 0, 0.6);\n  z-index: 10;\n  width: 100%;\n  height: 100%;\n  align-items: center;\n  justify-content: center;\n"]);return Ze=function(){return e},e}var qe=Object(ee.a)(Ue.a.div)(Ze()),Je=Object(ee.a)(Ue.a.div)(We()),Qe=ee.a.header(Ke()),Xe=ee.a.button(Ge());function $e(e,n){Object(a.useEffect)((function(){var t=function(t){t.key===e&&n()};return window.addEventListener("keydown",t),function(){window.removeEventListener("keydown",t)}}),[n,e])}var en=150,nn=r.a.memo((function(e){var n,t=e.isVisible,c=e.onClick,i=e.children,l=e.scrollLock;n=!(!t||!(void 0!==l&&l)),Object(a.useEffect)((function(){return document.body.style.overflow=n?"hidden":"unset",function(){document.body.style.overflow="unset"}}),[n]),$e("Escape",(function(){t&&c()}));var s=Object(Ue.b)(t,null,{from:{opacity:0},enter:{opacity:1},leave:{opacity:0},unique:!0,config:{duration:en}}),u=Object(Ue.b)(t,null,{from:{transform:"scale(0)"},enter:{transform:"scale(1)"},leave:{transform:"scale(0)"},unique:!0,config:{duration:en}});return o.a.createPortal(r.a.createElement(r.a.Fragment,null,s.map((function(e){var n=e.item,t=e.key,a=e.props;return n&&r.a.createElement(qe,{onClick:c,style:a,key:t},u.map((function(e){var n=e.item,t=e.key,a=e.props;return n&&r.a.createElement(Je,{key:t,style:a,onClick:function(e){return e.stopPropagation()}},r.a.createElement(Qe,null,r.a.createElement(Xe,{onClick:c},r.a.createElement(_e.i,null))),i)})))}))),document.body)})),tn=t(243),an=t(244),rn=t(245);function cn(){var e=Object($.a)(["\n  display: grid;\n  grid-template-columns: repeat(7, 25px);\n  grid-template-rows: repeat(7, 25px);\n  grid-column-gap: 0px;\n  grid-row-gap: 0px;\n  font-size: 0.7em;\n"]);return cn=function(){return e},e}function on(){var e=Object($.a)(["\n  display: flex;\n  flex-direction: column;\n  flex: 1 1 auto;\n  width: 175px;\n  font-family: Arial, Helvetica, sans-serif;\n  border: 1px solid #e1e1e1;\n  border-radius: 4px;\n  padding: 10px;\n  background: white;\n  position: absolute;\n  right: 0;\n  top: 100%;\n"]);return on=function(){return e},e}function ln(){var e=Object($.a)(["\n  position: relative;\n  display: flex;\n  position: relative;\n  flex-direction: column;\n  flex: 1;\n  z-index: 3;\n"]);return ln=function(){return e},e}var sn=ee.a.div(ln()),un=ee.a.div(on()),dn=ee.a.div(cn());function fn(){var e=Object($.a)(["\n  opacity: ",";\n  font-weight: ",";\n"]);return fn=function(){return e},e}function pn(){var e=Object($.a)(["\n  display: flex;\n  font-size: 1em;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n  border: none;\n  background: ",";\n  color: ",";\n  border-radius: 4px;\n  opacity: ",";\n  :hover {\n    background: ",";\n    color: ",";\n  }\n"]);return pn=function(){return e},e}var bn=ee.a.button.attrs((function(e){return{}}))(pn(),(function(e){return e.isSelected?"#2296f3":"none"}),(function(e){return e.isSelected?"#fff":"#000"}),(function(e){return e.isSelected?1:void 0}),(function(e){return!e.isSelected&&e.isDate?"rgba(34,150,243, 0.6)":void 0}),(function(e){return!e.isSelected&&e.isDate?"#fff":void 0})),mn=ee.a.p.attrs((function(e){return{}}))(fn(),(function(e){return e.differentMonth&&!e.isHeading?.5:1}),(function(e){return e.isHeading?600:0})),On=r.a.memo((function(e){var n=e.heading,t=e.date,a=e.onClick,c=e.isSelected,o=e.isSameMonth;return r.a.createElement(bn,{isDate:!!t,isSelected:c,onClick:function(){return t&&a?a(t):void 0}},r.a.createElement(mn,{isHeading:!!n,differentMonth:!o},n||(t?Object(H.a)(t,"d"):void 0)))}));function gn(){var e=Object($.a)(["\n  background: transparent;\n  cursor: pointer;\n  border: none;\n  opacity: 0.3;\n  transition: 0.3s;\n  :hover {\n    opacity: 1;\n  }\n"]);return gn=function(){return e},e}function jn(){var e=Object($.a)(["\n  display: flex;\n  justify-content: space-between;\n  padding: 0 0 10px 0;\n  align-items: center;\n\n  h4 {\n    margin: 0;\n    padding: 0;\n    font-size: 0.8em;\n    align-self: center;\n  }\n"]);return jn=function(){return e},e}var vn=ee.a.div(jn()),yn=ee.a.button(gn()),hn=r.a.memo((function(e){var n=e.date,t=e.left,a=e.right;return r.a.createElement(vn,null,r.a.createElement(yn,{onClick:function(e){e.preventDefault(),t()}},r.a.createElement(_e.a,null)),r.a.createElement("h4",null,Object(H.a)(n,"MMMM yyyy")),r.a.createElement(yn,{onClick:function(e){e.preventDefault(),a()}},r.a.createElement(_e.b,null)))}));function xn(){var e=Object($.a)(["\n  padding: 10px;\n  background: #fff;\n  border: 1px solid #edebe9;\n  border-radius: 4px;\n  svg {\n    margin-left: 10px;\n  }\n"]);return xn=function(){return e},e}var En=ee.a.button(xn()),kn=r.a.memo((function(e){var n=e.selectedDate,t=e.onClick;return r.a.createElement(En,{type:"button",onClick:function(e){e.stopPropagation(),t()}},Object(H.a)(n,"do MMMM Y"),r.a.createElement(_e.h,null))}));var wn=r.a.memo((function(e){var n=e.selectedDate,t=e.changeDate,c=e.close,o=e.setOpen,l=e.isOpen,s=e.singleClick,u=void 0!==s&&s,d=Object(a.useState)(Object(I.a)(n)),f=Object(i.a)(d,2),p=f[0],b=f[1],m=Object(N.a)(Object(Fe.a)(p)),O=0===m?6:m-1,g=Object(ae.a)(p),j=42-O-g,v=function(e){t(e),b(Object(I.a)(e)),u&&c()},y=r.a.createRef(),h=Array(O).fill(0).map((function(e,n){return Object(tn.a)(Object(an.a)(Object(rn.a)(p,1)),O-n-1)})),x=Array(g).fill(1).map((function(e,n){return Object(Y.a)(Object(Fe.a)(p),n)})),E=Array(j>0?j:0).fill(0).map((function(e,n){return Object(Y.a)(Object(Fe.a)(Object(Oe.a)(p,1)),n)})),k=function(e){return!(!e||!Object(ge.a)(e,p))};return function(e,n){Object(a.useEffect)((function(){var t=function(t){e.current&&!e.current.contains(t.target)&&n(t)};return document.addEventListener("mousedown",t),document.addEventListener("touchstart",t),function(){document.removeEventListener("mousedown",t),document.removeEventListener("touchstart",t)}}),[e,n])}(y,Object(a.useCallback)((function(){l&&(c(),b(Object(I.a)(n)))}),[n,l,c])),l||Object(V.a)(n,p)||b(Object(I.a)(n)),r.a.createElement(sn,{ref:y},r.a.createElement(kn,{selectedDate:n,onClick:function(){o(!l)}}),l&&r.a.createElement(un,{onClick:function(e){return e.stopPropagation()}},r.a.createElement(hn,{date:p,left:function(){return b(Object(rn.a)(p,1))},right:function(){return b(Object(Oe.a)(p,1))}}),r.a.createElement(dn,null,["M","T","W","T","F","S","S"].map((function(e,n){return r.a.createElement(On,{key:e+n,heading:e,isSelected:!1,isSameMonth:!1})})),h.map((function(e){return r.a.createElement(On,{key:e.toISOString(),date:e,onClick:v,isSelected:Object(V.a)(e,n),isSameMonth:k(e)})})),x.map((function(e){return r.a.createElement(On,{key:e.toISOString(),date:e,onClick:v,isSelected:Object(V.a)(e,n),isSameMonth:k(e)})})),E.map((function(e){return r.a.createElement(On,{key:e.toISOString(),date:e,onClick:v,isSelected:Object(V.a)(e,n),isSameMonth:k(e)})})))))})),Dn=t(246);function Sn(){var e=Object($.a)(["\n  border: none;\n  background: transparent;\n  padding: 5px;\n"]);return Sn=function(){return e},e}function Cn(){var e=Object($.a)(["\n  font-size: 0.9em;\n  text-align: left;\n  display: flex;\n  justify-content: space-between;\n  cursor: pointer;\n  p {\n    margin: 0;\n  }\n  div {\n    display: flex;\n  }\n  span {\n    background: ",";\n    width: 5px;\n    height: 100%;\n    margin-right: 5px;\n  }\n"]);return Cn=function(){return e},e}function In(){var e=Object($.a)(["\n  flex-direction: row;\n  button {\n    flex: 1;\n    :first-child {\n      margin-right: 5px;\n      background: #f32222;\n    }\n    :last-child {\n      margin-left: 5px;\n    }\n  }\n"]);return In=function(){return e},e}function Mn(){var e=Object($.a)(["\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n\n  p,\n  h3 {\n    margin: 0;\n  }\n  p {\n    font-size: 0.9em;\n  }\n  h3 {\n    font-size: 1.1em;\n  }\n\n  :not(:first-child) {\n    margin-top: 10px;\n  }\n"]);return Mn=function(){return e},e}function Tn(){var e=Object($.a)(["\n  display: flex;\n  flex-direction: column;\n  height: 200px;\n  border: 1px solid #eaeaea;\n"]);return Tn=function(){return e},e}function Hn(){var e=Object($.a)(["\n  margin-top: 10px;\n  padding: 10px;\n  border: none;\n  background: #2296f3;\n  color: #fff;\n  border-radius: 4px;\n  :disabled {\n    opacity: 0.4;\n  }\n"]);return Hn=function(){return e},e}function Ln(){var e=Object($.a)(["\n  background: #fff;\n  padding: 10px;\n  border: 1px solid #edebe9;\n  border-radius: 4px;\n  display: flex;\n  flex: 1;\n  :first-child {\n    margin-right: 5px;\n  }\n  :last-child {\n    margin-left: 5px;\n  }\n"]);return Ln=function(){return e},e}function Fn(){var e=Object($.a)(["\n  padding: 10px;\n  border: 1px solid #edebe9;\n  border-radius: 4px;\n  margin-top: 10px;\n"]);return Fn=function(){return e},e}function An(){var e=Object($.a)(["\n  display: flex;\n  flex-direction: column;\n"]);return An=function(){return e},e}function zn(){var e=Object($.a)(["\n  display: flex;\n  z-index: 1;\n  div:first-child {\n    margin-right: 5px;\n  }\n  div:last-child {\n    margin-left: 5px;\n  }\n"]);return zn=function(){return e},e}function Pn(){var e=Object($.a)(["\n  padding: 20px;\n  margin: 1px;\n  display: flex;\n  flex-direction: column;\n  min-width: 300px;\n\n  @media only screen and (max-width: 430px) {\n    min-width: 200px;\n  }\n"]);return Pn=function(){return e},e}var Nn=ee.a.div(Pn()),Yn=ee.a.span(zn()),Bn=ee.a.form(An()),Vn=ee.a.input(Fn()),Rn=(ee.a.select(Ln()),ee.a.button(Hn())),Un=ee.a.div(Tn()),_n=ee.a.span(Mn()),Gn=Object(ee.a)(_n)(In()),Kn=ee.a.div.attrs((function(e){return{}}))(Cn(),(function(e){return e.color})),Wn=ee.a.button(Sn());function Zn(){var e=Object($.a)(["\n  margin-top: 10px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font: 400 13.3333px Arial;\n  input:not(:last-child) {\n    margin-right: 10px;\n  }\n  input:last-child {\n    margin-right: 0;\n  }\n"]);return Zn=function(){return e},e}function qn(){var e=Object($.a)(["\n  background: #fff;\n  padding: 10px;\n  border: 1px solid #edebe9;\n  border-radius: 4px;\n  display: flex;\n  flex: 1;\n  :first-child {\n    margin-right: 5px;\n  }\n  :last-child {\n    margin-left: 5px;\n  }\n"]);return qn=function(){return e},e}var Jn=ee.a.select(qn()),Qn=ee.a.span(Zn()),Xn=function(e){var n=e.startTime,t=e.endTime,a=e.setStartTime,c=e.setEndTime,o=function(e,n,t){for(var a=[],r=60*n,c=0;r<60*t;c++){var o=Math.floor(r/60),i=r%60;a[c]=("0"+o).slice(-2)+":"+("0"+i).slice(-2),r+=e}return a}(15,8,17.15);return r.a.createElement("div",{style:{display:"flex",marginTop:"10px"}},r.a.createElement(Jn,{style:{color:n?"#000":"#7d7d7d"},value:o.indexOf(n),onChange:function(e){e.target.selectedIndex>0&&a(o[e.target.selectedIndex-1])}},r.a.createElement("option",{disabled:!!n},"Start Time"),o.filter((function(e,n){return n<o.length-1})).map((function(e,n){return r.a.createElement("option",{key:n,value:n},e)}))),r.a.createElement(Jn,{style:{color:t?"#000":"#7d7d7d"},value:o.indexOf(t),onChange:function(e){e.target.selectedIndex>0&&c(o[e.target.selectedIndex-1])}},r.a.createElement("option",{disabled:!!t},"End Time"),o.map((function(e,n){return r.a.createElement("option",{key:n,value:n},e)}))))},$n=function(e){var n=e.series,t=e.setSeries,a=e.classGroup,c=e.setClassGroup,o=Z((function(e){return e.classes}));return r.a.createElement("div",{style:{display:"flex",marginTop:"10px",alignItems:"center"}},r.a.createElement(Jn,{style:{color:a?"#000":"#7d7d7d"},value:a&&o.indexOf(a),onChange:function(e){e.target.selectedIndex>0&&c(o[e.target.selectedIndex-1])}},r.a.createElement("option",{disabled:!!a},"Class"),o.map((function(e,n){return r.a.createElement("option",{key:n,value:n},e.year+e.group)}))),r.a.createElement("span",{style:{flex:1,marginLeft:"5px",padding:"10px",border:"1px solid transparent"}},r.a.createElement("label",null,"Series"),r.a.createElement("input",{type:"checkbox",checked:n,onChange:function(){return t(!n)}})))},et=function(e){var n=e.checkboxState,t=e.setCheckbox;return r.a.createElement(Qn,null,r.a.createElement("label",null,"Mon"),r.a.createElement("input",{type:"checkbox",checked:n.monday,onChange:function(){return t((function(e){return Object(s.a)(Object(s.a)({},e),{},{monday:!e.monday})}))}}),r.a.createElement("label",null,"Tue"),r.a.createElement("input",{type:"checkbox",checked:n.tuesday,onChange:function(){return t((function(e){return Object(s.a)(Object(s.a)({},e),{},{tuesday:!e.tuesday})}))}}),r.a.createElement("label",null,"Wed"),r.a.createElement("input",{type:"checkbox",checked:n.wednesday,onChange:function(){return t((function(e){return Object(s.a)(Object(s.a)({},e),{},{wednesday:!e.wednesday})}))}}),r.a.createElement("label",null,"Thu"),r.a.createElement("input",{type:"checkbox",checked:n.thursday,onChange:function(){return t((function(e){return Object(s.a)(Object(s.a)({},e),{},{thursday:!e.thursday})}))}}),r.a.createElement("label",null,"Fri"),r.a.createElement("input",{type:"checkbox",checked:n.friday,onChange:function(){return t((function(e){return Object(s.a)(Object(s.a)({},e),{},{friday:!e.friday})}))}}))},nt=function(e){var n=e.initialDate,t=Object(E.b)(),c=Object(a.useState)(new Date(n)),o=Object(i.a)(c,2),l=o[0],s=o[1],u=Object(a.useState)(!1),d=Object(i.a)(u,2),f=d[0],p=d[1],b=Object(a.useState)(!1),m=Object(i.a)(b,2),O=m[0],g=m[1],j=Object(a.useState)(!1),v=Object(i.a)(j,2),y=v[0],x=v[1],k=Object(a.useState)(void 0),w=Object(i.a)(k,2),D=w[0],S=w[1],C=Object(a.useState)(void 0),M=Object(i.a)(C,2),T=M[0],H=M[1],L=Object(a.useState)(l),F=Object(i.a)(L,2),A=F[0],z=F[1],N=Object(a.useState)(Object(Dn.a)(l,1)),Y=Object(i.a)(N,2),B=Y[0],V=Y[1],R=Object(a.useState)(!1),U=Object(i.a)(R,2),_=U[0],G=U[1],K=Object(a.useState)(void 0),W=Object(i.a)(K,2),Z=W[0],q=W[1],J=Object(a.useState)(""),Q=Object(i.a)(J,2),X=Q[0],$=Q[1],ee=Object(a.useState)({monday:!1,tuesday:!1,wednesday:!1,thursday:!1,friday:!1}),ne=Object(i.a)(ee,2),te=ne[0],ae=ne[1];return r.a.createElement(Nn,null,r.a.createElement("h3",{style:{margin:0}},"New Lesson"),r.a.createElement("img",{style:{margin:"20px"},height:"100px",src:"/teacher_booking/calendar.svg",alt:"New Lesson Icon"}),r.a.createElement(Bn,{onSubmit:function(e){e.preventDefault(),T&&Z&&D&&t(_?h.newSeriesCreated({lesson:{start:new Date(new Date(l.setHours(parseFloat(T))).setMinutes(parseFloat(T.slice(-2)))).toISOString(),end:new Date(new Date(l.setHours(parseFloat(Z))).setMinutes(parseFloat(Z.slice(-2)))).toISOString(),subject:X,teacherId:"01",seriesId:Object(P.a)(),class:null===D||void 0===D?void 0:D.id},series:{start:A,end:B,days:te}}):h.newLessonCreated({id:Object(P.a)(),start:new Date(new Date(l.setHours(parseFloat(T))).setMinutes(parseFloat(T.slice(-2)))).toISOString(),end:new Date(new Date(l.setHours(parseFloat(Z))).setMinutes(parseFloat(Z.slice(-2)))).toISOString(),subject:X,teacherId:"01",class:null===D||void 0===D?void 0:D.id}))}},_?r.a.createElement(Yn,null,r.a.createElement(wn,{close:function(){return g(!1)},setOpen:g,isOpen:O,changeDate:function(e){return z(Object(I.a)(e))},selectedDate:Object(I.a)(A),singleClick:!0}),r.a.createElement(wn,{close:function(){return x(!1)},setOpen:x,isOpen:y,changeDate:function(e){return V(Object(I.a)(e))},selectedDate:Object(I.a)(B),singleClick:!0})):r.a.createElement(wn,{close:function(){return p(!1)},setOpen:p,isOpen:f,changeDate:function(e){return s(Object(I.a)(e))},selectedDate:Object(I.a)(l||new Date(n)),singleClick:!0}),r.a.createElement(Vn,{placeholder:"Subject",value:X,onChange:function(e){return $(e.target.value)}}),r.a.createElement(Xn,{startTime:T,endTime:Z,setStartTime:H,setEndTime:q}),r.a.createElement($n,{series:_,setSeries:G,classGroup:D,setClassGroup:S}),_&&r.a.createElement(et,{setCheckbox:ae,checkboxState:te}),r.a.createElement(Rn,{disabled:!T||!Z||!X||!D||_&&!Object.values(te).includes(!0),type:"submit"},"Create")))},tt=r.a.memo((function(e){var n=e.selectedDate,t=Object(E.b)(),c=Object(a.useState)(!1),o=Object(i.a)(c,2),l=o[0],s=o[1],u=Object(a.useState)(!1),d=Object(i.a)(u,2),f=d[0],p=d[1],b=Z((function(e){return e.selectedDate}));return $e("Escape",(function(){s(!1)})),r.a.createElement(Ye,null,r.a.createElement(nn,{isVisible:f,onClick:function(){p(!1),t(h.popupClosed())},scrollLock:!0},r.a.createElement(nt,{initialDate:b})),r.a.createElement("h1",null,"Availability"),r.a.createElement("span",null,r.a.createElement(wn,{close:function(){return s(!1)},setOpen:s,isOpen:l,changeDate:function(e){return t(h.selectedDayChanged(Object(I.a)(new Date(e))))},selectedDate:new Date(n)}),r.a.createElement(Ve,{onClick:function(){return Object(V.a)(new Date(n),new Date)?void 0:t(h.selectedDayChanged(Object(I.a)(new Date)))},title:"Reset date to present"},r.a.createElement(_e.k,null)),r.a.createElement(Re,{onClick:function(){p(!0),t(h.popupOpened())},title:"Add lesson"},r.a.createElement(_e.f,null))))})),at=function(){var e=Z((function(e){return e.selectedDate})),n=Object(Le.a)(new Date(e)).toISOString(),t=Object(Fe.a)(new Date(e)).toISOString();return r.a.createElement(r.a.Fragment,null,r.a.createElement(tt,{selectedDate:e}),r.a.createElement(Me,null,r.a.createElement(xe,{startOfYear:n})),r.a.createElement(Me,null,r.a.createElement(be,{startOfMonth:t})))};function rt(){var e=Object($.a)(["\n  margin: 0;\n  font-size: 0.7em;\n"]);return rt=function(){return e},e}function ct(){var e=Object($.a)(["\n  margin: 0;\n  font-weight: 600;\n  font-size: 0.8em;\n"]);return ct=function(){return e},e}function ot(){var e=Object($.a)(["\n  display: flex;\n  flex: 1;\n  align-items: center;\n  justify-content: space-between;\n  flex-direction: row;\n  position: absolute;\n  width: calc(100% - 40px);\n  padding: 0 20px;\n  background: #2296f3;\n  color: #fff;\n  border-radius: 4px;\n  cursor: pointer;\n  transition: 0.3s;\n  opacity: 0.8;\n  overflow: hidden;\n  z-index: 1;\n\n  :hover {\n    opacity: 0.9;\n  }\n\n  span {\n    display: flex;\n    flex-direction: ",";\n    line-height: 1em;\n\n    h4 {\n      margin-right: ",";\n    }\n  }\n  button {\n    border: none;\n    color: #fff;\n    background: none;\n  }\n"]);return ot=function(){return e},e}function it(){var e=Object($.a)(["\n  position: absolute;\n  width: 100%;\n  border-bottom: 1px dotted #edebe9;\n  line-height: 0; /* Line up the *middle* of the number, not its baseline, with its value */\n"]);return it=function(){return e},e}function lt(){var e=Object($.a)(["\n  font-size: 0.7em;\n  color: #abb1b6;\n  line-height: 0; /* Line up the *middle* of the number, not its baseline, with its value */\n"]);return lt=function(){return e},e}function st(){var e=Object($.a)(["\n  position: relative;\n  display: flex;\n  flex: 1;\n  margin-left: 20px;\n"]);return st=function(){return e},e}function ut(){var e=Object($.a)(["\n  position: relative;\n"]);return ut=function(){return e},e}function dt(){var e=Object($.a)(["\n  display: flex;\n  flex: 1;\n  position: relative;\n  overflow: auto;\n"]);return dt=function(){return e},e}var ft=ee.a.div.attrs((function(e){return{style:{padding:e.padding}}}))(dt()),pt=ee.a.div.attrs((function(e){return{style:{height:e.height}}}))(ut()),bt=ee.a.div(st()),mt=ee.a.div.attrs((function(e){return{style:{transform:e.transform}}}))(lt()),Ot=ee.a.rect.attrs((function(e){return{style:{transform:e.transform}}}))(it()),gt=ee.a.rect.attrs((function(e){return{style:{transform:e.transform,height:e.height,background:e.colour}}}))(ot(),(function(e){return e.smallHeight?"row":"column"}),(function(e){return e.smallHeight?"5px":"0"})),jt=ee.a.h4(ct()),vt=ee.a.p(rt()),yt=t(150),ht=function(e){var n=e.scale,t=e.tickHeight,a=void 0===t?30:t,c=n.range()[0];return r.a.createElement(pt,{height:"".concat(c,"px")},function(e,n,t){try{var a=Math.max(Math.floor(n/t),1),r=e.ticks(a);return r.length<a?r:r.filter((function(e,n){return n%2===0}))}catch(c){return[]}}(n,c,a).map((function(e){return r.a.createElement(mt,{key:e.toISOString(),transform:"translateY(".concat(n(e).toFixed(0),"px)")},Object(H.a)(e,"kk:mm"))})))},xt=t(251),Et=t(248),kt=r.a.memo((function(e){var n=e.lesson,t=e.scale,a=e.colour,c=e.isFocussed,o=Object(E.b)(),l=Object(xt.a)({item:{type:"*",id:n.id},collect:function(e){return{opacity:e.isDragging()?.8:1}}}),s=Object(i.a)(l,2)[1],u=new Date(n.start),d=new Date(n.end);return r.a.createElement(gt,{tabIndex:0,colour:a,ref:s,onClick:function(e){o(h.lessonFocussed(n)),e.currentTarget.scrollIntoView({behavior:"smooth",block:"start"})},style:{zIndex:c?2:1},height:"".concat(t(d)-t(u),"px"),transform:"translateY(".concat(t(u).toFixed(0),"px)"),smallHeight:Object(Et.a)(d,u)<1,key:n.id},r.a.createElement("span",null,r.a.createElement(jt,null,n.subject),r.a.createElement(vt,null,"".concat(Object(H.a)(u,"H:mm")," - ").concat(Object(H.a)(d,"H:mm")))),r.a.createElement("button",{onClick:function(e){e.stopPropagation(),o(h.lessonDeleted({key:Object(I.a)(u).toISOString(),id:n.id}))}},r.a.createElement(_e.i,null)))})),wt=function(e){var n=e.scale,t=e.tickHeight,a=void 0===t?30:t,c=n.range()[0];return function(e,n,t){try{var a=Math.max(Math.floor(n/t),1),r=e.ticks(a);return r.length<a?r:r.filter((function(e,n){return n%2===0}))}catch(c){return[]}}(n,c,a).map((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ot,{key:e.toISOString(),transform:"translateY(".concat(n(e).toFixed(0),"px)")}))}))},Dt=t(252),St=function(e){var n=e.scale,t=e.tickHeight,a=void 0===t?30:t,c=n.range()[0],o=new Date("2020-07-20T06:00:00.000Z"),i=new Date("2020-07-20T06:15:00.000Z"),l="".concat(n(i)-n(o),"px");return function(e,n,t){try{var a=Math.max(Math.floor(n/t),1),r=e.ticks(a);return r.length<a?r:r.filter((function(e,n){return n%2===0}))}catch(c){return[]}}(n,c,a).map((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ct,{id:e.toISOString(),tick:n(e),height:l}))}))},Ct=function(e){var n=e.id,t=e.tick,c=e.height,o=Object(E.b)(),l=Object(a.useState)("none"),s=Object(i.a)(l,2),u=s[0],d=s[1],f=Object(Dt.a)({drop:function(e,t){t.didDrop()||m&&o(h.updateStartTime({id:t.getItem().id,time:n}))},accept:"*",collect:function(e){return{isOver:e.isOver(),canDrop:e.canDrop()}}}),p=Object(i.a)(f,2),b=p[0],m=b.canDrop,O=b.isOver,g=p[1];return O&&"none"===u&&d("2px solid rgba(34,150,243, 1)"),O||"none"===u||d("none"),r.a.createElement("div",{key:n,ref:g,style:{position:"absolute",transform:"translateY(".concat(t.toFixed(0),"px)"),height:c,zIndex:1,width:"100%",borderTop:u}})},It=function(){var e=Z((function(e){return e.lessons[e.selectedDate]})),n=Z((function(e){return e.focussedLesson})),t=Z((function(e){return e.selectedDate})),a=Object(yt.a)().range([525,0]).domain([new Date(new Date(t).setHours(parseFloat("17:00"))),new Date(new Date(t).setHours(parseFloat("08:00")))]);return r.a.createElement(ft,{padding:"".concat(a(new Date("2020-07-20T06:00:00.000Z"))-a(new Date("2020-07-20T05:00:00.000Z")),"px 0")},r.a.createElement(ht,{tickHeight:35,scale:a}),r.a.createElement(bt,null,r.a.createElement(wt,{tickHeight:35,scale:a}),r.a.createElement(St,{tickHeight:8.75,scale:a}),e&&e.map((function(e,t){var c;return r.a.createElement(kt,{colour:e.color,key:e.id,lesson:e,scale:a,isFocussed:null!==(c=(null===n||void 0===n?void 0:n.id)===e.id)&&void 0!==c&&c})}))))};function Mt(){var e=Object($.a)(["\n  display: flex;\n  button,\n  h2 {\n    padding: 0 5px;\n  }\n"]);return Mt=function(){return e},e}function Tt(){var e=Object($.a)(["\n  position: absolute;\n  top: 10px;\n  right: 10px;\n"]);return Tt=function(){return e},e}function Ht(){var e=Object($.a)(["\n  svg {\n    opacity: ",";\n  }\n  :hover svg {\n    opacity: 1;\n  }\n"]);return Ht=function(){return e},e}function Lt(){var e=Object($.a)(["\n  border: none;\n  color: #fff;\n  background: none;\n  display: flex;\n  align-items: center;\n"]);return Lt=function(){return e},e}function Ft(){var e=Object($.a)(["\n  color: #fff;\n  display: flex;\n  flex: 1;\n  margin: 0;\n  font-weight: 0;\n  text-align: center;\n"]);return Ft=function(){return e},e}function At(){var e=Object($.a)(["\n  color: #fff;\n  display: flex;\n  flex: 1;\n  margin: 0;\n  text-align: center;\n  font-size: 1.3em;\n  font-weight: 600;\n"]);return At=function(){return e},e}function zt(){var e=Object($.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-top: 20px;\n"]);return zt=function(){return e},e}function Pt(){var e=Object($.a)(["\n  display: flex;\n  justify-content: center;\n  margin-top: 20px;\n"]);return Pt=function(){return e},e}function Nt(){var e=Object($.a)(["\n  display: flex;\n  flex-direction: column;\n  padding: 30px 20px;\n  align-items: center;\n  flex: 1;\n  img {\n    width: 80%;\n  }\n"]);return Nt=function(){return e},e}var Yt=Object(ee.a)(Ue.a.div).attrs((function(e){return{style:{background:e.background?e.background:"transparent"}}}))(Nt()),Bt=ee.a.span(Pt()),Vt=ee.a.span(zt()),Rt=ee.a.h2(At()),Ut=ee.a.p(Ft()),_t=ee.a.button(Lt()),Gt=Object(ee.a)(_t).attrs((function(e){return{}}))(Ht(),(function(e){return e.isLinked?"1":"0.6"})),Kt=Object(ee.a)(_t)(Tt()),Wt=ee.a.span(Mt()),Zt=function(e){var n=e.initialDate,t=e.lesson,c=Object(E.b)(),o=Z((function(e){return e.classes})),l=Object(a.useState)(new Date(n)),s=Object(i.a)(l,2),u=s[0],d=s[1],f=Object(a.useState)(!1),p=Object(i.a)(f,2),b=p[0],m=p[1],O=Object(a.useState)(!1),g=Object(i.a)(O,2),j=g[0],v=g[1],y=Object(a.useState)(!1),x=Object(i.a)(y,2),k=x[0],w=x[1],D=Object(a.useState)(o.find((function(e){return e.id===t.class}))),S=Object(i.a)(D,2),C=S[0],M=S[1],T=Object(a.useState)("".concat(Object(H.a)(new Date(t.start),"HH"),":").concat(Object(H.a)(new Date(t.start),"mm"))),L=Object(i.a)(T,2),F=L[0],A=L[1],z=Object(a.useState)("".concat(Object(H.a)(new Date(t.end),"HH"),":").concat(Object(H.a)(new Date(t.end),"mm"))),P=Object(i.a)(z,2),N=P[0],Y=P[1],B=Object(a.useState)(t.subject),V=Object(i.a)(B,2),R=V[0],U=V[1],_=Object(a.useState)(!1),G=Object(i.a)(_,2),K=G[0],W=G[1],q=Object(a.useState)(u),J=Object(i.a)(q,2),Q=J[0],X=J[1],$=Object(a.useState)(Object(Dn.a)(u,1)),ee=Object(i.a)($,2),ne=ee[0],te=ee[1],ae=Object(a.useState)({monday:!1,tuesday:!1,wednesday:!1,thursday:!1,friday:!1}),re=Object(i.a)(ae,2),ce=re[0],oe=re[1];return r.a.createElement(Nn,null,r.a.createElement("h3",{style:{margin:0}},"Edit Lesson"),r.a.createElement("img",{style:{margin:"20px"},height:"100px",src:"/teacher_booking/edit_calendar.svg",alt:"Update Lesson Icon"}),r.a.createElement(Bn,{onSubmit:function(e){e.preventDefault(),F&&N&&C&&c(K?h.lessonEditedSeriesAdded({lesson:{id:t.id,start:new Date(new Date(u.setHours(parseFloat(F))).setMinutes(parseFloat(F.slice(-2)))).toISOString(),end:new Date(new Date(u.setHours(parseFloat(N))).setMinutes(parseFloat(N.slice(-2)))).toISOString(),subject:R,teacherId:"01",color:t.color,class:C.id},series:{start:Q,end:ne,days:ce},oldKey:n}):h.lessonEdited({lesson:{id:t.id,start:new Date(new Date(u.setHours(parseFloat(F))).setMinutes(parseFloat(F.slice(-2)))).toISOString(),end:new Date(new Date(u.setHours(parseFloat(N))).setMinutes(parseFloat(N.slice(-2)))).toISOString(),subject:R,teacherId:"01",color:t.color,class:C.id},oldKey:n}))}},K?r.a.createElement(Yn,null,r.a.createElement(wn,{close:function(){return v(!1)},setOpen:v,isOpen:j,changeDate:function(e){return X(Object(I.a)(e))},selectedDate:Object(I.a)(Q),singleClick:!0}),r.a.createElement(wn,{close:function(){return w(!1)},setOpen:w,isOpen:k,changeDate:function(e){return te(Object(I.a)(e))},selectedDate:Object(I.a)(ne),singleClick:!0})):r.a.createElement(wn,{close:function(){return m(!1)},setOpen:m,isOpen:b,changeDate:function(e){return d(Object(I.a)(e))},selectedDate:Object(I.a)(u||new Date(n)),singleClick:!0}),r.a.createElement(Vn,{placeholder:"Subject",value:R,onChange:function(e){return U(e.target.value)}}),r.a.createElement(Xn,{startTime:F,endTime:N,setStartTime:A,setEndTime:Y}),r.a.createElement($n,{series:K,setSeries:W,classGroup:C,setClassGroup:M}),K&&r.a.createElement(et,{setCheckbox:oe,checkboxState:ce}),r.a.createElement(Rn,{disabled:!F||!N||!R||!C||K&&!Object.values(ce).includes(!0),type:"submit"},"Update")))},qt=t(67),Jt=function(e){var n,t,c=e.lesson,o=e.isOpen,l=Object(E.b)(),s=Z((function(e){return Array.prototype.concat.apply([],Object.values(e.lessons)).filter((function(e){return e.seriesId})).filter((function(e){var n;return null!==(n=e.seriesId===(null===c||void 0===c?void 0:c.seriesId))&&void 0!==n?n:[]})).sort((function(e,n){var t=new Date(e.start),a=new Date(n.start);return t.getTime()-a.getTime()}))})),u=s.reverse().find((function(e){var n;return null!==(n=e.seriesId===(null===c||void 0===c?void 0:c.seriesId))&&void 0!==n?n:void 0})),d=s.reverse().find((function(e){var n;return null!==(n=e.seriesId===(null===c||void 0===c?void 0:c.seriesId))&&void 0!==n?n:void 0})),f=s.length,p=Object(a.useState)(!1),b=Object(i.a)(p,2),m=b[0],O=b[1],g=Object(a.useState)(new qt.c({fixedWidth:!0,defaultHeight:100})),j=Object(i.a)(g,1)[0],v=null!==(n=null===s||void 0===s?void 0:s.length)&&void 0!==n?n:0,y=function(e){var n=e.index,t=e.key,a=e.style,c=e.parent;return r.a.createElement(r.a.Fragment,null,s&&r.a.createElement(qt.b,{key:t,cache:j,parent:c,columnIndex:0,rowIndex:n},r.a.createElement(Kn,{style:a,tabIndex:0,color:s[n].color},r.a.createElement("div",{style:{width:"50px"}},r.a.createElement("span",null),r.a.createElement("p",null,n+1)),r.a.createElement("p",null,Object(H.a)(new Date(s[n].start),"EEEE do MMMM Y")),r.a.createElement("div",{style:{flex:1,justifyContent:"flex-end"}},r.a.createElement(Wn,{onClick:function(){return l(h.lessonUnlinked({key:Object(I.a)(new Date(s[n].start)).toISOString(),id:s[n].seriesId}))}},r.a.createElement(_e.l,null)),r.a.createElement(Wn,{onClick:function(){return l(h.lessonDeleted({key:Object(I.a)(new Date(s[n].start)).toISOString(),id:s[n].id}))}},r.a.createElement(_e.i,null))))))};return r.a.createElement(Nn,null,r.a.createElement("h3",{style:{margin:0}},"Series Details"),r.a.createElement("img",{style:{margin:"20px"},height:"100px",src:"/teacher_booking/link_calendar.svg",alt:"New Lesson Icon"}),r.a.createElement(Bn,{onSubmit:function(e){return e.preventDefault()}},!m&&r.a.createElement(r.a.Fragment,null,r.a.createElement(_n,null,r.a.createElement("p",null,"Subject"),r.a.createElement("h3",null,null!==(t=null===c||void 0===c?void 0:c.subject)&&void 0!==t?t:"N/A")),r.a.createElement(_n,null,r.a.createElement("p",null,"Series Duration"),r.a.createElement("h3",null,d&&u?"".concat(Object(H.a)(new Date(d.start),"do MMMM Y")," - ").concat(Object(H.a)(new Date(u.start),"do MMM Y")):"N/A")),r.a.createElement(_n,null,r.a.createElement("p",null,"Time"),r.a.createElement("h3",null,c?"".concat(Object(H.a)(new Date(null===c||void 0===c?void 0:c.start),"HH:mm")," - ").concat(Object(H.a)(new Date(null===c||void 0===c?void 0:c.end),"HH:mm")):"N/A")),r.a.createElement(_n,{style:{marginBottom:"10px"}},r.a.createElement("p",null,"Lessons"),r.a.createElement("h3",null,f))),s&&m&&r.a.createElement(Un,null,r.a.createElement(qt.a,null,(function(e){var n=e.width,t=e.height;return r.a.createElement(qt.d,{tabIndex:0,containerStyle:{padding:0,margin:0},deferredMeasurementCache:j,width:n,height:t,rowHeight:j.rowHeight,rowRenderer:y,rowCount:v,overscanRowCount:20})}))),m?r.a.createElement(Rn,{type:"button",onClick:function(){return O(!1)}},"View Series"):r.a.createElement(Gn,null,r.a.createElement(Rn,{type:"button",disabled:!c,onClick:function(){c&&l(h.seriesDeleted(c.seriesId)),o(!1)}},"Delete Series"),r.a.createElement(Rn,{disabled:!s.length,type:"button",onClick:function(){return O(!0)}},"View Lessons"))))},Qt=r.a.memo((function(e){var n=e.lesson,t=Z((function(e){return e.infoPanelOpen})),c=Z((function(e){return e.infoPanelColor})),o=Object(a.useState)(!1),l=Object(i.a)(o,2),s=l[0],u=l[1],d=Object(a.useState)("edit"),f=Object(i.a)(d,2),p=f[0],b=f[1],m=Object(Ue.b)(t,null,{from:{transform:"translate(100%)"},enter:{transform:"translate(0)"},leave:{transform:"translate(100%)"},unique:!0,config:{duration:en}}),O=Z((function(e){return e.popupOpen}));$e("Escape",(function(){O||g(h.closePanelButtonPressed())}));var g=Object(E.b)(),j=Z((function(e){return e.classes.find((function(e){return e.id===(null===n||void 0===n?void 0:n.class)}))}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(nn,{isVisible:s,onClick:function(){u(!1),g(h.popupClosed())},scrollLock:!0},n&&"edit"===p?r.a.createElement(Zt,{initialDate:Object(I.a)(new Date(n.start)).toISOString(),lesson:n}):"series"===p?r.a.createElement(Jt,{lesson:n,isOpen:u}):null),m.map((function(e){var t,a,o,i,l=e.item,s=e.key,d=e.props;return l&&r.a.createElement(Yt,{background:c,style:d,key:s},r.a.createElement(Kt,{onClick:function(){return g(h.closePanelButtonPressed())}},r.a.createElement(_e.i,null)),r.a.createElement("img",{src:"/teacher_booking/blackboard.svg",alt:"Blackboard Icon"}),r.a.createElement(Bt,null,r.a.createElement(_t,{title:"Edit Lesson",disabled:!n,onClick:function(){u(!0),b("edit"),g(h.popupOpened())}},r.a.createElement(_e.d,{size:"22"})),r.a.createElement(Gt,{isLinked:!!(null===n||void 0===n?void 0:n.seriesId),title:(null===n||void 0===n?void 0:n.seriesId)?"Series Linked":"Not part of a series",disabled:!n||!n.seriesId,onClick:function(){u(!0),b("series"),g(h.popupOpened())}},(null===n||void 0===n?void 0:n.seriesId)?r.a.createElement(_e.e,{size:"22"}):r.a.createElement(_e.l,{size:"22"})),r.a.createElement(_t,{disabled:!n,title:"Delete Lesson",onClick:function(){return n?g(h.lessonDeleted({key:Object(I.a)(new Date(n.start)).toISOString(),id:n.id})):void 0}},r.a.createElement(_e.j,{size:"22"}))),r.a.createElement(Vt,null,r.a.createElement(Ut,null,"Subject"),r.a.createElement(Rt,null,null!==(t=null===n||void 0===n?void 0:n.subject)&&void 0!==t?t:"N/A")),r.a.createElement(Vt,null,r.a.createElement(Ut,null,"Date"),r.a.createElement(Rt,null,(null===n||void 0===n?void 0:n.start)?Object(H.a)(new Date(n.start),"do MMMM Y"):"N/A")),r.a.createElement(Vt,null,r.a.createElement(Ut,null,"Time"),r.a.createElement(Rt,null,n?"".concat(Object(H.a)(new Date(null===n||void 0===n?void 0:n.start),"HH:mm")," - ").concat(Object(H.a)(new Date(null===n||void 0===n?void 0:n.end),"HH:mm")):"N/A")),r.a.createElement(r.a.Fragment,null,r.a.createElement(Vt,null,r.a.createElement(Ut,null,"Year"),r.a.createElement(Rt,null,null!==(a=null===j||void 0===j?void 0:j.year)&&void 0!==a?a:"N/A")),r.a.createElement(Vt,null,r.a.createElement(Ut,null,"Class"),r.a.createElement(Wt,null,r.a.createElement(Rt,null,null!==(o=null===j||void 0===j?void 0:j.group)&&void 0!==o?o:"N/A"))),r.a.createElement(Vt,null,r.a.createElement(Ut,null,"Students"),r.a.createElement(Wt,null,r.a.createElement(Rt,null,null!==(i=null===j||void 0===j?void 0:j.students.length)&&void 0!==i?i:"N/A"),n&&n.class&&r.a.createElement(_t,null,r.a.createElement(_e.g,null))))))})))})),Xt=function(){var e=Z((function(e){return e.focussedLesson}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{style:{position:"relative",display:"flex"}},r.a.createElement(Qt,{lesson:e})))},$t=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(te,null,r.a.createElement(at,null),r.a.createElement(It,null)),r.a.createElement(Xt,null))};function ea(){var e=Object($.a)(["\n  color: #fff;\n  opacity: 0.6;\n"]);return ea=function(){return e},e}function na(){var e=Object($.a)(["\n  background: #2296f3;\n  display: flex;\n  flex-direction: column;\n  padding: 30px 20px;\n\n  ul {\n    padding: 0;\n    margin: 0;\n    list-style: none;\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n  }\n\n  span {\n    display: flex;\n    flex-direction: column;\n  }\n  span a {\n    margin-bottom: 20px;\n  }\n  a {\n    transition: 0.3s;\n  }\n  a:hover {\n    opacity: 1;\n  }\n"]);return na=function(){return e},e}var ta=ee.a.nav(na()),aa=Object(ee.a)(J.b)(ea()),ra=function(){return r.a.createElement(ta,null,r.a.createElement("ul",null,r.a.createElement("span",null,r.a.createElement(aa,{exact:!0,to:"/",activeStyle:{opacity:"1"}},r.a.createElement(_e.h,{size:"32"})),r.a.createElement(aa,{to:"/students",activeStyle:{opacity:"1"}},r.a.createElement(_e.m,{size:"32"}))),r.a.createElement(aa,{to:"/settings",activeStyle:{opacity:"1"}},r.a.createElement(_e.c,{size:"32"}))))},ca=(t(231),function(){return r.a.createElement("div",{className:"App"},r.a.createElement(ra,null),r.a.createElement(q.a,{exact:!0,path:"/",component:$t}))}),oa=document.getElementById("root");Object(c.render)(r.a.createElement(E.a,{store:W},r.a.createElement(J.a,{basename:"/teacher_booking"},r.a.createElement(Q.a,{backend:X.a},r.a.createElement(ca,null)))),oa)}},[[160,1,2]]]);
//# sourceMappingURL=main.d4907302.chunk.js.map