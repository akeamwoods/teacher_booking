{"version":3,"sources":["store/actions.ts","helpers/getLessonColour.ts","helpers/dateHelpers.ts","helpers/getDayAsNumber.ts","store/index.ts","handlers/AvailabilityHandler/style.tsx","helpers/getDayColour.ts","helpers/getDayTextColour.ts","components/Timeline/DayTimeline/style.tsx","components/Timeline/DayTimeline/index.tsx","components/Timeline/MonthTimeline/style.tsx","components/Timeline/MonthTimeline/index.tsx","components/Timeline/style.tsx","components/Timeline/TimelineHeader/style.tsx","components/Popup/style.tsx","hooks/useKeyboardEvent.ts","constants.ts","components/Popup/index.tsx","hooks/useScrollLock.ts","components/DatePicker/style.tsx","components/DatePicker/Date/style.tsx","components/DatePicker/Date/index.tsx","components/DatePicker/Controls/style.tsx","components/DatePicker/Controls/index.tsx","components/DatePicker/DatePickerButton/style.tsx","components/DatePicker/DatePickerButton/index.tsx","components/DatePicker/index.tsx","hooks/useOutsideClick.ts","components/Forms/style.tsx","components/Forms/Controls/style.tsx","components/Forms/Controls/StartEndTime.tsx","helpers/getTimeSlots.ts","components/Forms/Controls/ClassAndSeries.tsx","components/Forms/Controls/MultiCheckbox.tsx","components/Forms/NewLessonForm.tsx","components/Timeline/TimelineHeader/index.tsx","components/Timeline/index.tsx","components/Schedule/style.tsx","components/Schedule/Axis.tsx","components/Schedule/Lesson.tsx","components/Schedule/GridLines.tsx","components/Schedule/DropContainers.tsx","components/Schedule/index.tsx","components/InformationBar/style.tsx","components/Forms/EditLessonForm.tsx","components/Forms/SeriesForm.tsx","components/InformationBar/index.tsx","handlers/AvailabilityHandler/SideBar/index.tsx","handlers/AvailabilityHandler/index.tsx","components/SideMenu/style.tsx","components/SideMenu/index.tsx","index.tsx"],"names":["selectedMonthChanged","createAction","selectedDayChanged","newLessonCreated","newSeriesCreated","lessonEdited","lessonEditedSeriesAdded","lessonDeleted","lessonUnlinked","lessonFocussed","lessonUnfocussed","actions","infoPanelClosed","closePanelButtonPressed","popupOpened","popupClosed","updateStartTime","seriesDeleted","getLessonColour","coloursInUse","colourScheme","combinedColours","shuffleArray","frequencies","reduce","obj","val","sortedFrequencies","Object","keys","sort","a","b","length","array","i","j","Math","floor","random","createDaysFromArray","days","start","end","daysToAdd","startDayNumber","getDay","entries","forEach","entry","x","day","dayInLowercase","toLowerCase","getDayAsNumber","nextDay","addDays","isBefore","isSameDay","push","addDaysToDictionary","lesson","dictionary","startTime","endTime","seriesId","key","startOfDay","toISOString","lessonToAdd","undefined","id","uuidv4","Date","setHours","parseFloat","setMinutes","slice","color","map","persistConfig","storage","blacklist","initialState","selectedDate","lessons","classes","year","group","students","focussedLesson","infoPanelOpen","popupOpen","infoPanelColor","persistedReducer","persistReducer","state","action","produce","draft","type","getType","setMonth","getMonth","payload","format","series","oldKey","filter","find","newKey","time","l","difference","differenceInMinutes","addMinutes","store","createStore","composeWithDevTools","useTypedSelector","persistStore","useSelector","Wrapper","styled","div","getDayColour","dayAsNumber","includes","getDayTextColour","DayTimelineWrapper","DayWrapper","attrs","props","style","borderBottomColor","isCurrentDay","Day","button","background","boxShadow","DayText","p","DayTimeline","React","memo","startOfMonth","daysInMonth","getDaysInMonth","Array","from","_","index","dispatch","useDispatch","ref","createRef","useEffect","setTimeout","current","scrollIntoView","behavior","block","inline","onClick","MonthTimelineWrapper","MonthWrapper","fontWeight","isCurrentMonth","MonthTimeline","startOfYear","months","addMonths","month","Month","isSameMonth","Fade","RightFade","Header","header","ButtonBase","ResetButton","AddButton","animated","Container","CloseButton","useKeyboardEvent","callback","handler","event","window","addEventListener","removeEventListener","constants","Popup","isLocked","isVisible","children","scrollLock","document","body","overflow","transitions","useTransition","opacity","enter","leave","unique","config","duration","transitions2","transform","ReactDOM","createPortal","item","e","stopPropagation","isSelected","isDate","DateText","differentMonth","isHeading","heading","date","TransparentButton","Controls","left","right","preventDefault","Button","DatePickerButton","DatePicker","changeDate","close","setOpen","isOpen","singleClick","useState","setDate","padding","paddingDays","futureDays","handleClick","prevDays","fill","subDays","endOfMonth","subMonths","nextDays","sameMonth","listener","contains","target","useOutsideClick","useCallback","SeriesContainer","span","Form","form","Input","input","SubmitButton","select","ListWrapper","SeriesSpan","ButtonSpan","SeriesRow","Select","CheckBoxContainer","StartEndTime","setStartTime","setEndTime","options","interval","times","hh","mm","getTimeSlots","display","marginTop","value","indexOf","onChange","selectedIndex","disabled","option","ClassAndSeriesControls","setSeries","classGroup","setClassGroup","classOptions","alignItems","flex","marginLeft","border","checked","MultiCheckbox","checkboxState","setCheckbox","monday","tuesday","wednesday","thursday","friday","NewLessonForm","initialDate","seriesStartOpen","setSeriesStartOpen","seriesEndOpen","setSeriesEndOpen","seriesStart","setSeriesStart","addWeeks","seriesEnd","setSeriesEnd","subject","updateSubject","margin","height","src","process","alt","onSubmit","teacherId","class","placeholder","values","TimelineHeader","setVisibility","title","Timeline","yearStart","monthStart","AxisWrapper","GridContainer","Tick","Rect","rect","LessonWrapper","colour","smallHeight","SubjectText","h4","TimeText","Axis","scale","tickHeight","range","maxNumber","max","ticks","error","tick","toFixed","Lesson","isFocussed","useDrag","collect","monitor","isDragging","drag","tabIndex","currentTarget","zIndex","differenceInHours","GridLines","DropContainers","startHeight","endHeight","containerHeight","DropContainer","borderTop","setBorderTop","useDrop","drop","didDrop","canDrop","getItem","accept","isOver","position","width","Schedule","scaleTime","domain","ButtonBar","Section","Heading","h2","SubHeading","LinkedButton","isLinked","EditLessonForm","c","SeriesForm","prototype","concat","apply","dateA","dateB","getTime","last","reverse","first","size","viewSeries","setViewSeries","CellMeasurerCache","fixedWidth","defaultHeight","cache","rowCount","renderRow","parent","columnIndex","rowIndex","justifyContent","marginBottom","containerStyle","deferredMeasurementCache","rowHeight","rowRenderer","overscanRowCount","InformationBar","mode","setMode","isPopupOpen","yearGroup","SideBar","AvailabilityHandler","nav","Link","NavLink","SideMenu","exact","to","activeStyle","App","className","path","component","rootElement","getElementById","render","basename","DndProvider","backend","HTML5Backend"],"mappings":"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","file":"static/js/main.398be283.chunk.js","sourcesContent":["import { ActionType, createAction } from \"typesafe-actions\";\nimport { Lesson } from \"./types\";\n\nconst selectedMonthChanged = createAction(\"selected month changed\")<Date>();\nconst selectedDayChanged = createAction(\"selected day changed\")<Date>();\nconst newLessonCreated = createAction(\"new lesson created\")<Lesson>();\nconst newSeriesCreated = createAction(\"new series created\")<{\n  lesson: Omit<Lesson, \"color\" | \"id\">;\n  series: {\n    start: Date;\n    end: Date;\n    days: {\n      monday: boolean;\n      tuesday: boolean;\n      wednesday: boolean;\n      thursday: boolean;\n      friday: boolean;\n    };\n  };\n}>();\nconst lessonEdited = createAction(\"lesson edited\")<{\n  lesson: Lesson;\n  oldKey: string;\n}>();\nconst lessonEditedSeriesAdded = createAction(\n  \"lesson edited with series added\"\n)<{\n  lesson: Lesson;\n  oldKey: string;\n  series: {\n    start: Date;\n    end: Date;\n    days: {\n      monday: boolean;\n      tuesday: boolean;\n      wednesday: boolean;\n      thursday: boolean;\n      friday: boolean;\n    };\n  };\n}>();\n\nconst lessonDeleted = createAction(\"lesson deleted\")<{\n  key: string;\n  id: string;\n}>();\n\nconst lessonUnlinked = createAction(\"lesson unlinked\")<{\n  key: string;\n  id: string;\n}>();\n\nconst lessonFocussed = createAction(\"lesson focussed\")<Lesson>();\nconst lessonUnfocussed = createAction(\"lesson unfocussed\")();\nconst infoPanelClosed = createAction(\"info panel closed\")();\nconst closePanelButtonPressed = createAction(\"close panel button pressed\")();\nconst popupOpened = createAction(\"popup opened\")();\nconst popupClosed = createAction(\"popup closed\")();\n\nconst updateStartTime = createAction(\"lesson start time updated\")<{\n  id: string;\n  time: string;\n}>();\n\nconst seriesDeleted = createAction(\"series deleted\")<string>();\n\nexport const actions = {\n  selectedMonthChanged,\n  selectedDayChanged,\n  newLessonCreated,\n  newSeriesCreated,\n  lessonEdited,\n  lessonDeleted,\n  lessonUnlinked,\n  lessonFocussed,\n  infoPanelClosed,\n  lessonUnfocussed,\n  closePanelButtonPressed,\n  lessonEditedSeriesAdded,\n  popupOpened,\n  popupClosed,\n  updateStartTime,\n  seriesDeleted,\n};\n\nexport type Actions = ActionType<typeof actions>;\n","export const getLessonColour = (coloursInUse: string[] | undefined): string => {\n  // this method is used to select the color for each lesson object in such a way that duplicate colours are rare.\n\n  const colourScheme = [\n    \"#f3225a\",\n    \"#22b7f3\",\n    \"#f3ab22\",\n    \"#3eb764\",\n    \"#4E22F3\",\n    \"#F32222\",\n    \"#F32293\",\n    \"#9B22F3\",\n  ];\n\n  //find element frequencies\n  const combinedColours = coloursInUse\n    ? [...coloursInUse, ...colourScheme]\n    : colourScheme;\n\n  shuffleArray(combinedColours);\n  const frequencies: { [key: string]: number } = combinedColours.reduce(\n    function (obj: { [key: string]: number }, val) {\n      obj[val] = (obj[val] || 0) + 1;\n      return obj;\n    },\n    {}\n  );\n\n  //sort keys by count\n  const sortedFrequencies = Object.keys(frequencies).sort(function (\n    a: string,\n    b: string\n  ) {\n    return frequencies[b] - frequencies[a];\n  });\n\n  // return least common colour string\n  return sortedFrequencies[sortedFrequencies.length - 1];\n};\n\nconst shuffleArray = (array: any[]): void => {\n  for (let i = array.length - 1; i > 0; i--) {\n    const j = Math.floor(Math.random() * (i + 1));\n    [array[i], array[j]] = [array[j], array[i]];\n  }\n};\n","import { getDay, addDays, isBefore, isSameDay, startOfDay } from \"date-fns\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { getDayAsNumber } from \"./getDayAsNumber\";\nimport { Lesson } from \"../store/types\";\nimport { getLessonColour } from \"./getLessonColour\";\n\nexport const createDaysFromArray = (\n  days: {\n    monday: boolean;\n    tuesday: boolean;\n    wednesday: boolean;\n    thursday: boolean;\n    friday: boolean;\n  },\n  start: Date,\n  end: Date\n): Date[] => {\n  let daysToAdd: Date[] = [];\n  const startDayNumber = getDay(start);\n\n  // loop through series selected days and add corresponding matches to array\n  Object.entries(days).forEach((entry) => {\n    if (entry[1]) {\n      const dayOfWeek = getDayAsNumber(entry[0]);\n      const x = (dayOfWeek - startDayNumber + 7) % 7;\n      let nextDay = addDays(start, x);\n      while (isBefore(nextDay, end) || isSameDay(nextDay, end)) {\n        daysToAdd.push(nextDay);\n        nextDay = addDays(nextDay, 7);\n      }\n    }\n  });\n  return daysToAdd;\n};\n\nexport const addDaysToDictionary = (\n  days: Date[],\n  lesson: Pick<\n    Lesson,\n    \"teacherId\" | \"subject\" | \"start\" | \"end\" | \"class\" | \"seriesId\"\n  >,\n  dictionary: any,\n  startTime: string,\n  endTime: string,\n  seriesId?: string\n) => {\n  days.forEach((day) => {\n    const key = startOfDay(day).toISOString();\n    const lessonToAdd = {\n      ...lesson,\n      seriesId: lesson.seriesId\n        ? lesson.seriesId\n        : seriesId\n        ? seriesId\n        : undefined,\n      id: uuidv4(),\n      start: new Date(\n        new Date(day.setHours(parseFloat(startTime))).setMinutes(\n          parseFloat(startTime.slice(-2))\n        )\n      ).toISOString(),\n      end: new Date(\n        new Date(day.setHours(parseFloat(endTime))).setMinutes(\n          parseFloat(endTime.slice(-2))\n        )\n      ).toISOString(),\n      color: getLessonColour(\n        dictionary[key]\n          ? dictionary[key].map((lesson: Lesson) => lesson.color)\n          : []\n      ),\n    };\n\n    dictionary[key]\n      ? (dictionary[key] = [...dictionary[key], lessonToAdd])\n      : (dictionary[key] = [lessonToAdd]);\n  });\n  return;\n};\n","export const getDayAsNumber = (day: string): number => {\n  const dayInLowercase = day.toLowerCase();\n  if (dayInLowercase === \"monday\") {\n    return 1;\n  } else if (dayInLowercase === \"tuesday\") {\n    return 2;\n  } else if (dayInLowercase === \"wednesday\") {\n    return 3;\n  } else if (dayInLowercase === \"thursday\") {\n    return 4;\n  } else if (dayInLowercase === \"friday\") {\n    return 5;\n  } else if (dayInLowercase === \"saturday\") {\n    return 6;\n  } else {\n    return 0;\n  }\n};\n","import { Actions, actions } from \"./actions\";\nimport { Reducer, createStore } from \"redux\";\nimport { TypedUseSelectorHook, useSelector } from \"react-redux\";\nimport { composeWithDevTools } from \"redux-devtools-extension\";\nimport produce from \"immer\";\nimport { getType } from \"typesafe-actions\";\nimport { persistStore, persistReducer } from \"redux-persist\";\nimport storage from \"redux-persist/lib/storage\"; // defaults to localStorage for web\nimport {\n  setMonth,\n  getMonth,\n  startOfDay,\n  format,\n  differenceInMinutes,\n  addMinutes,\n} from \"date-fns\";\nimport { Lesson, Class } from \"./types\";\nimport { getLessonColour } from \"../helpers/getLessonColour\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport {\n  createDaysFromArray,\n  addDaysToDictionary,\n} from \"../helpers/dateHelpers\";\n\nconst persistConfig = {\n  key: \"root\",\n  storage,\n  blacklist: [\n    \"selectedDate\",\n    \"focussedLesson\",\n    \"infoPanelOpen\",\n    \"popupOpen\",\n    \"infoPanelColor\",\n  ],\n};\n\nconst initialState = () => ({\n  selectedDate: startOfDay(new Date()).toISOString(),\n  lessons: {} as { [key: string]: Lesson[] },\n  classes: [{ id: \"01\", year: 7, group: \"A\", students: [] }] as Class[],\n  focussedLesson: undefined as undefined | Lesson,\n  infoPanelOpen: false,\n  popupOpen: false,\n  infoPanelColor: undefined as string | undefined,\n});\n\nexport type State = Readonly<ReturnType<typeof initialState>>;\n\nexport const rootReducer: Reducer<State, Actions> = (\n  state = initialState(),\n  action: Actions\n) =>\n  produce(state, (draft) => {\n    switch (action.type) {\n      case getType(actions.selectedMonthChanged): {\n        draft.selectedDate = setMonth(\n          new Date(draft.selectedDate),\n          getMonth(action.payload)\n        ).toISOString();\n        break;\n      }\n\n      case getType(actions.selectedDayChanged): {\n        draft.selectedDate = new Date(action.payload).toISOString();\n        break;\n      }\n\n      case getType(actions.newLessonCreated): {\n        const key = startOfDay(new Date(action.payload.start)).toISOString();\n        const lesson = {\n          ...action.payload,\n          color: getLessonColour(\n            draft.lessons[key]\n              ? draft.lessons[key].map((lesson) => lesson.color)\n              : []\n          ),\n        };\n        draft.lessons[key]\n          ? (draft.lessons[key] = [...draft.lessons[key], lesson])\n          : (draft.lessons[key] = [lesson]);\n        break;\n      }\n\n      case getType(actions.newSeriesCreated): {\n        const startTime = `${format(\n          new Date(action.payload.lesson.start),\n          \"HH\"\n        )}:${format(new Date(action.payload.lesson.start), \"mm\")}`;\n\n        const endTime = `${format(\n          new Date(action.payload.lesson.end),\n          \"HH\"\n        )}:${format(new Date(action.payload.lesson.end), \"mm\")}`;\n\n        const daysToAdd = createDaysFromArray(\n          action.payload.series.days,\n          action.payload.series.start,\n          action.payload.series.end\n        );\n\n        addDaysToDictionary(\n          daysToAdd,\n          action.payload.lesson,\n          draft.lessons,\n          startTime,\n          endTime\n        );\n        break;\n      }\n\n      case getType(actions.lessonEditedSeriesAdded): {\n        const seriesId = uuidv4();\n        const startTime = `${format(\n          new Date(action.payload.lesson.start),\n          \"HH\"\n        )}:${format(new Date(action.payload.lesson.start), \"mm\")}`;\n        const endTime = `${format(\n          new Date(action.payload.lesson.end),\n          \"HH\"\n        )}:${format(new Date(action.payload.lesson.end), \"mm\")}`;\n\n        // remove old lesson details from dictionary\n        draft.lessons[action.payload.oldKey] = [\n          ...draft.lessons[action.payload.oldKey].filter(\n            (lesson) => lesson.id !== action.payload.lesson.id\n          ),\n        ];\n\n        const daysToAdd = createDaysFromArray(\n          action.payload.series.days,\n          action.payload.series.start,\n          action.payload.series.end\n        );\n\n        addDaysToDictionary(\n          daysToAdd,\n          action.payload.lesson,\n          draft.lessons,\n          startTime,\n          endTime,\n          seriesId\n        );\n        break;\n      }\n\n      case getType(actions.lessonDeleted): {\n        draft.lessons[action.payload.key] = [\n          ...draft.lessons[action.payload.key].filter(\n            (lesson) => lesson.id !== action.payload.id\n          ),\n        ];\n\n        if (!draft.lessons[action.payload.key].length)\n          delete draft.lessons[action.payload.key]; // remove key if it has no values\n\n        if (\n          draft.focussedLesson &&\n          draft.focussedLesson.id === action.payload.id\n        )\n          draft.focussedLesson = undefined; // if deleted item is focussed, removed\n        break;\n      }\n\n      case getType(actions.lessonUnlinked): {\n        const lesson = draft.lessons[action.payload.key].find(\n          (lesson) => lesson.seriesId === action.payload.id\n        );\n        if (lesson) lesson.seriesId = undefined;\n\n        break;\n      }\n\n      case getType(actions.lessonFocussed): {\n        draft.focussedLesson = action.payload;\n        draft.infoPanelColor = action.payload.color;\n        draft.infoPanelOpen = true;\n        break;\n      }\n\n      case getType(actions.lessonUnfocussed): {\n        draft.focussedLesson = undefined;\n        break;\n      }\n\n      case getType(actions.closePanelButtonPressed): {\n        draft.infoPanelOpen = false;\n        break;\n      }\n\n      case getType(actions.lessonEdited): {\n        const oldKey = action.payload.oldKey;\n        const newKey = startOfDay(\n          new Date(action.payload.lesson.start)\n        ).toISOString();\n\n        //remove old lesson\n        draft.lessons[oldKey] = [\n          ...draft.lessons[oldKey].filter(\n            (lesson) => lesson.id !== action.payload.lesson.id\n          ),\n        ];\n\n        // update dictionary with new details\n        draft.lessons[newKey]\n          ? (draft.lessons[newKey] = [\n              ...draft.lessons[newKey],\n              action.payload.lesson,\n            ])\n          : (draft.lessons[newKey] = [action.payload.lesson]);\n\n        // update focussed lesson if it has been edited\n        if (draft.focussedLesson?.id === action.payload.lesson.id) {\n          draft.focussedLesson = action.payload.lesson;\n        }\n        break;\n      }\n\n      case getType(actions.popupOpened): {\n        draft.popupOpen = true;\n        break;\n      }\n\n      case getType(actions.popupClosed): {\n        draft.popupOpen = false;\n        break;\n      }\n\n      case getType(actions.updateStartTime): {\n        const lessons =\n          draft.lessons[\n            startOfDay(new Date(action.payload.time)).toISOString()\n          ];\n        const lesson = lessons.find((l) => l.id === action.payload.id);\n        if (lesson) {\n          if (lesson.seriesId) lesson.seriesId = undefined;\n\n          const difference = differenceInMinutes(\n            new Date(lesson.end),\n            new Date(lesson.start)\n          );\n          lesson.start = action.payload.time;\n          lesson.end = addMinutes(\n            new Date(action.payload.time),\n            difference\n          ).toISOString();\n\n          if (draft.focussedLesson && draft.focussedLesson.id === lesson.id)\n            draft.focussedLesson = lesson;\n        }\n        break;\n      }\n\n      case getType(actions.seriesDeleted): {\n        for (const [key] of Object.entries(draft.lessons)) {\n          draft.lessons[key] = draft.lessons[key].filter(\n            (lesson) => lesson.seriesId !== action.payload\n          );\n          if (!draft.lessons[key].length) delete draft.lessons[key];\n        }\n        if (\n          draft.focussedLesson?.seriesId &&\n          draft.focussedLesson.seriesId === action.payload\n        )\n          draft.focussedLesson = undefined;\n        draft.popupOpen = false;\n        break;\n      }\n    }\n  });\n\nconst persistedReducer = persistReducer(persistConfig, rootReducer);\nexport const store = createStore(persistedReducer, composeWithDevTools());\nexport const persistor = persistStore(store);\nexport const useTypedSelector: TypedUseSelectorHook<State> = useSelector;\n","import styled from \"styled-components\";\n\nexport const Wrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  overflow: auto;\n  div::-webkit-scrollbar {\n    height: 0px;\n    width: 0px; /* Remove scrollbar space */\n    background: transparent; /* Optional: just make scrollbar invisible */\n  }\n`;\n","import { getDay } from \"date-fns\";\n\nexport const getDayColour = (day: Date, lessons: number): string => {\n  const dayAsNumber = getDay(day);\n  if ([0, 6].includes(dayAsNumber)) {\n    return `repeating-linear-gradient(\n      135deg,\n      #f8f8f7,\n      #f8f8f7 2px,\n      #efefef 2px,\n      #efefef 4px\n    )`; //sat/sun\n  } else {\n    return lessons === 0\n      ? \"#efefef\"\n      : lessons < 3\n      ? \"#3eb764\"\n      : lessons < 5\n      ? \"#f3ab22\"\n      : \"#f3225a\";\n  }\n};\n","import { getDay } from \"date-fns\";\n\nexport const getDayTextColour = (day: Date, lessons: number): string => {\n  const dayAsNumber = getDay(day);\n  if ([0, 6].includes(dayAsNumber)) {\n    return \"#000\"; //sat/sun\n  } else {\n    return lessons === 0 ? \"#000\" : \"#fff\";\n  }\n};\n","import styled from \"styled-components\";\nimport { getDayColour } from \"../../../helpers/getDayColour\";\nimport { getDayTextColour } from \"../../../helpers/getDayTextColour\";\n\nexport const DayTimelineWrapper = styled.div`\n  display: flex;\n  overflow: auto;\n  min-width: 100%;\n  justify-content: space-between;\n`;\n\nexport const DayWrapper = styled.div.attrs<{\n  isCurrentDay: boolean;\n}>((props) => ({\n  style: { borderBottomColor: props.isCurrentDay ? \"#2296f3\" : \"#e1e1e1\" },\n}))<{ isCurrentDay: boolean }>`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  flex: 1;\n  text-align: center;\n  cursor: pointer;\n  :not(:last-child) {\n    padding-right: 10px;\n  }\n  :not(:first-child) {\n    padding-left: 10px;\n  }\n  border-bottom: 2px solid;\n  margin: 0;\n`;\n\nexport const Day = styled.button.attrs<{\n  isCurrentDay: boolean;\n  day: Date;\n  lessons: number;\n}>((props) => ({\n  style: {\n    background: props.isCurrentDay\n      ? \"#2296f3\"\n      : getDayColour(props.day, props.lessons),\n    color: props.isCurrentDay\n      ? \"#fff\"\n      : getDayTextColour(props.day, props.lessons),\n    boxShadow: props.isCurrentDay ? \"0 4px 8px 0 rgba(0,0,0,0.2)\" : \"none\",\n  },\n}))<{ isCurrentDay: boolean; day: Date; lessons: number }>`\n  display: flex;\n  background: #e1e1e1;\n  padding: 25px;\n  border: none;\n  width: 30px;\n  height: 30px;\n  border-radius: 50%;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n`;\n\nexport const DayText = styled.p`\n  font-size: 0.7em;\n  color: #abb1b6;\n  padding-bottom: 15px;\n`;\n","import React, { createRef } from \"react\";\nimport { getDaysInMonth, addDays, format, startOfDay } from \"date-fns\";\nimport {\n  DayTimelineWrapper,\n  DayWrapper,\n  Day as DayContainer,\n  DayText,\n} from \"./style\";\nimport { actions } from \"../../../store/actions\";\nimport { useDispatch } from \"react-redux\";\nimport { useTypedSelector } from \"../../../store\";\n\nexport const DayTimeline: React.FC<{ startOfMonth: string }> = React.memo(\n  ({ startOfMonth }) => {\n    const daysInMonth = getDaysInMonth(new Date(startOfMonth));\n    const days = Array.from(Array(daysInMonth), (_, index) =>\n      addDays(startOfDay(new Date(startOfMonth)), index).toISOString()\n    );\n    return (\n      <DayTimelineWrapper>\n        {days.map((day) => (\n          <Day key={day} day={day} />\n        ))}\n      </DayTimelineWrapper>\n    );\n  }\n);\n\nexport const Day: React.FC<{ day: string }> = React.memo(({ day }) => {\n  const dispatch = useDispatch();\n  const ref = createRef<HTMLDivElement>();\n  const isCurrentDay = useTypedSelector((state) => state.selectedDate === day);\n  const handleClick = () => {\n    dispatch(actions.selectedDayChanged(startOfDay(new Date(day))));\n  };\n\n  const lessons = useTypedSelector(\n    (state) => state.lessons[startOfDay(new Date(day)).toISOString()]\n  );\n  React.useEffect(() => {\n    setTimeout(() => {\n      if (isCurrentDay && ref.current)\n        ref.current.scrollIntoView({\n          behavior: \"smooth\",\n          block: \"center\",\n          inline: \"center\",\n        });\n    }, 50);\n  }, [isCurrentDay, ref]);\n  return (\n    <DayWrapper ref={ref} onClick={handleClick} isCurrentDay={isCurrentDay}>\n      <DayContainer\n        isCurrentDay={isCurrentDay}\n        day={new Date(day)}\n        lessons={lessons?.length ? lessons.length : 0}\n      >\n        {format(new Date(day), \"d\")}\n      </DayContainer>\n      <DayText>{format(new Date(day), \"E\")}</DayText>\n    </DayWrapper>\n  );\n});\n","import styled from \"styled-components\";\n\nexport const MonthTimelineWrapper = styled.div`\n  display: flex;\n  overflow: auto;\n  margin: 30px 0;\n  min-width: 100%;\n  justify-content: space-between;\n  font-size: 1.2em;\n`;\n\nexport const MonthWrapper = styled.button.attrs<{\n  isCurrentMonth: boolean;\n}>((props) => ({\n  style: { fontWeight: props.isCurrentMonth ? 800 : 400 },\n}))<{ isCurrentMonth: boolean }>`\n  display: flex;\n  cursor: pointer;\n  font-size: 1.2em;\n  border: none;\n  background: transparent;\n  :not(:last-child) {\n    margin-right: 30px;\n  }\n`;\n","import React, { createRef } from \"react\";\nimport { addMonths, isSameMonth, format } from \"date-fns\";\nimport { MonthTimelineWrapper, MonthWrapper } from \"./style\";\nimport { useDispatch } from \"react-redux\";\nimport { actions } from \"../../../store/actions\";\nimport { useTypedSelector } from \"../../../store\";\n\nexport const MonthTimeline: React.FC<{\n  startOfYear: string;\n}> = React.memo(({ startOfYear }) => {\n  const months = Array.from(Array(12), (_, index) =>\n    addMonths(new Date(startOfYear), index)\n  );\n  return (\n    <MonthTimelineWrapper>\n      {months.map((month) => (\n        <Month key={month.toISOString()} month={month} />\n      ))}\n    </MonthTimelineWrapper>\n  );\n});\n\nexport const Month: React.FC<{\n  month: Date;\n}> = React.memo(({ month }) => {\n  const dispatch = useDispatch();\n  const isCurrentMonth = useTypedSelector((state) =>\n    isSameMonth(new Date(state.selectedDate), month)\n  );\n\n  const ref = createRef<HTMLButtonElement>();\n\n  const handleClick = () => {\n    dispatch(actions.selectedMonthChanged(month));\n  };\n\n  React.useEffect(() => {\n    setTimeout(() => {\n      if (isCurrentMonth && ref.current)\n        ref.current.scrollIntoView({\n          behavior: \"auto\",\n          block: \"center\",\n          inline: \"center\",\n        });\n    }, 10);\n  }, [isCurrentMonth, ref]);\n  return (\n    <MonthWrapper\n      isCurrentMonth={isCurrentMonth}\n      onClick={handleClick}\n      ref={ref}\n    >\n      {format(month, \"MMMM\")}\n    </MonthWrapper>\n  );\n});\n","import styled from \"styled-components\";\n\nexport const Wrapper = styled.div`\n  background: #fff;\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  overflow: auto;\n  pointer-events: all;\n`;\n\nexport const Span = styled.div`\n  display: flex;\n  position: relative;\n  pointer-events: none;\n`;\n\nexport const Fade = styled.div`\n  position: absolute;\n  width: 50%;\n  height: 100%;\n  background: linear-gradient(\n    90deg,\n    rgba(255, 255, 255, 1),\n    rgba(255, 255, 255, 0)\n  );\n`;\n\nexport const RightFade = styled(Fade)`\n  right: 0;\n  background: linear-gradient(\n    90deg,\n    rgba(255, 255, 255, 0),\n    rgba(255, 255, 255, 1)\n  );\n`;\n\nexport const BottomFade = styled(Fade)`\n  bottom: 0;\n  border-bottom: 2px solid #e1e1e1;\n`;\n\nexport const BottomRightFade = styled(RightFade)`\n  bottom: 0;\n  border-bottom: 2px solid #e1e1e1;\n`;\n","import styled from \"styled-components\";\n\nexport const Header = styled.header`\n  display: flex;\n  align-items: stretch;\n  justify-content: space-between;\n  padding: 30px 20px 0 20px;\n  margin: 0;\n\n  h1,\n  h4 {\n    margin: 0;\n  }\n\n  span {\n    display: flex;\n    select {\n      padding: 0 15px;\n      margin: 0 10px;\n      border-color: #efedea;\n      border-radius: 4px;\n      font-weight: 800;\n    }\n  }\n`;\n\nconst ButtonBase = styled.button`\n  padding: 0 30px;\n  border-radius: 4px;\n  border: none;\n  font-size: 0.7em;\n  font-weight: 800;\n  background: white;\n  border: 1px solid #efedea;\n  margin-left: 10px;\n`;\n\nexport const ResetButton = styled(ButtonBase)`\n  /* background: #dbf4ff; */\n`;\n\nexport const AddButton = styled(ButtonBase)`\n  /* background: #ffce85; */\n`;\n","import styled from \"styled-components\";\nimport { animated } from \"react-spring\";\n\nexport const Wrapper = styled(animated.div)`\n  position: fixed;\n  display: flex;\n  flex-direction: column;\n  background: rgba(0, 0, 0, 0.6);\n  z-index: 10;\n  width: 100%;\n  height: 100%;\n  align-items: center;\n  justify-content: center;\n`;\n\nexport const Container = styled(animated.div)`\n  display: flex;\n  flex-direction: column;\n  background: #fff;\n  text-align: center;\n  align-items: center;\n  justify-content: center;\n  border-radius: 4px;\n  position: relative;\n  max-width: 80%;\n  max-height: 80%;\n  align-items: stretch;\n`;\n\nexport const Header = styled.header`\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  flex: 1;\n`;\n\nexport const CloseButton = styled.button`\n  background: transparent;\n  border: none;\n  position: absolute;\n  right: 10px;\n  top: 10px;\n  padding: 0;\n`;\n","import { useEffect } from \"react\";\n\nexport function useKeyboardEvent(key: React.Key, callback: () => void) {\n  useEffect(() => {\n    const handler = function (event: KeyboardEvent) {\n      if (event.key === key) {\n        callback();\n      }\n    };\n    window.addEventListener(\"keydown\", handler);\n    return () => {\n      window.removeEventListener(\"keydown\", handler);\n    };\n  }, [callback, key]);\n}\n","export const constants = {\n  animationDuration: 150,\n};\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { useTransition } from \"react-spring\";\nimport { FaTimes } from \"react-icons/fa\";\nimport { Wrapper, Container, Header, CloseButton } from \"./style\";\nimport { useScrollLock } from \"../../hooks/useScrollLock\";\nimport { useKeyboardEvent } from \"../../hooks/useKeyboardEvent\";\nimport { constants } from \"../../constants\";\n\nexport const Popup: React.FC<{\n  isVisible: boolean;\n  onClick: () => void;\n  scrollLock?: boolean;\n}> = React.memo(({ isVisible, onClick, children, scrollLock = false }) => {\n  useScrollLock(isVisible && scrollLock ? true : false);\n  useKeyboardEvent(\"Escape\", () => {\n    if (isVisible) onClick();\n  });\n  const transitions = useTransition(isVisible, null, {\n    from: { opacity: 0 },\n    enter: { opacity: 1 },\n    leave: { opacity: 0 },\n    unique: true,\n    config: { duration: constants.animationDuration },\n  });\n\n  const transitions2 = useTransition(isVisible, null, {\n    from: { transform: \"scale(0)\" },\n    enter: { transform: \"scale(1)\" },\n    leave: { transform: \"scale(0)\" },\n    unique: true,\n    config: { duration: constants.animationDuration },\n  });\n\n  return ReactDOM.createPortal(\n    <>\n      {transitions.map(\n        ({ item, key, props }) =>\n          item && (\n            <Wrapper onClick={onClick} style={props} key={key}>\n              {transitions2.map(\n                ({ item, key, props }) =>\n                  item && (\n                    <Container\n                      key={key}\n                      style={props}\n                      onClick={(e) => e.stopPropagation()}\n                    >\n                      <Header>\n                        <CloseButton onClick={onClick}>\n                          <FaTimes />\n                        </CloseButton>\n                      </Header>\n                      {children}\n                    </Container>\n                  )\n              )}\n            </Wrapper>\n          )\n      )}\n    </>,\n    document.body\n  );\n});\n","import { useEffect } from \"react\";\n\nexport function useScrollLock(isLocked: boolean) {\n  useEffect(() => {\n    isLocked\n      ? (document.body.style.overflow = \"hidden\")\n      : (document.body.style.overflow = \"unset\");\n    return () => {\n      document.body.style.overflow = \"unset\";\n    };\n  }, [isLocked]);\n}\n","import styled from \"styled-components\";\n\nexport const Wrapper = styled.div`\n  position: relative;\n  display: flex;\n  position: relative;\n  flex-direction: column;\n  flex: 1;\n  z-index: 3;\n`;\n\nexport const Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  flex: 1 1 auto;\n  width: 175px;\n  font-family: Arial, Helvetica, sans-serif;\n  border: 1px solid #e1e1e1;\n  border-radius: 4px;\n  padding: 10px;\n  background: white;\n  position: absolute;\n  right: 0;\n  top: 100%;\n`;\nexport const DayWrapper = styled.div`\n  display: grid;\n  grid-template-columns: repeat(7, 25px);\n  grid-template-rows: repeat(7, 25px);\n  grid-column-gap: 0px;\n  grid-row-gap: 0px;\n  font-size: 0.7em;\n`;\n","import styled from \"styled-components\";\n\ntype WrapperProps = {\n  isSelected: boolean;\n  isDate: boolean;\n};\n\nexport const Wrapper = styled.button.attrs((props: WrapperProps) => ({}))<\n  WrapperProps\n>`\n  display: flex;\n  font-size: 1em;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n  border: none;\n  background: ${(props) => (props.isSelected ? \"#2296f3\" : \"none\")};\n  color: ${(props) => (props.isSelected ? \"#fff\" : \"#000\")};\n  border-radius: 4px;\n  opacity: ${(props) => (props.isSelected ? 1 : undefined)};\n  :hover {\n    background: ${(props) =>\n      !props.isSelected && props.isDate ? \"rgba(34,150,243, 0.6)\" : undefined};\n    color: ${(props) =>\n      !props.isSelected && props.isDate ? \"#fff\" : undefined};\n  }\n`;\n\ntype DateTextProps = {\n  differentMonth: boolean;\n  isHeading: boolean;\n};\n\nexport const DateText = styled.p.attrs((props: DateTextProps) => ({}))<\n  DateTextProps\n>`\n  opacity: ${(props) => (props.differentMonth && !props.isHeading ? 0.5 : 1)};\n  font-weight: ${(props) => (props.isHeading ? 600 : 0)};\n`;\n","import React from \"react\";\nimport { Wrapper, DateText } from \"./style\";\nimport { format } from \"date-fns\";\n\nexport const Date: React.FC<{\n  heading?: string;\n  date?: Date;\n  onClick?: (date: Date) => void;\n  isSameMonth: boolean;\n  isSelected: boolean;\n}> = React.memo(({ heading, date, onClick, isSelected, isSameMonth }) => {\n  return (\n    <Wrapper\n      isDate={date ? true : false}\n      isSelected={isSelected}\n      onClick={() => (date && onClick ? onClick(date) : void {})}\n    >\n      <DateText\n        isHeading={heading ? true : false}\n        differentMonth={!isSameMonth}\n      >\n        {heading ? heading : date ? format(date, \"d\") : undefined}\n      </DateText>\n    </Wrapper>\n  );\n});\n","import styled from \"styled-components\";\n\nexport const Wrapper = styled.div`\n  display: flex;\n  justify-content: space-between;\n  padding: 0 0 10px 0;\n  align-items: center;\n\n  h4 {\n    margin: 0;\n    padding: 0;\n    font-size: 0.8em;\n    align-self: center;\n  }\n`;\n\nexport const TransparentButton = styled.button`\n  background: transparent;\n  cursor: pointer;\n  border: none;\n  opacity: 0.3;\n  transition: 0.3s;\n  :hover {\n    opacity: 1;\n  }\n`;\n","import React from \"react\";\nimport { Wrapper, TransparentButton } from \"./style\";\nimport { format } from \"date-fns\";\nimport { FaCaretLeft, FaCaretRight } from \"react-icons/fa\";\n\nexport const Controls: React.FC<{\n  date: Date;\n  left: () => void;\n  right: () => void;\n}> = React.memo(({ date, left, right }) => {\n  return (\n    <Wrapper>\n      <TransparentButton\n        onClick={(e) => {\n          e.preventDefault();\n          left();\n        }}\n      >\n        <FaCaretLeft />\n      </TransparentButton>\n      <h4>{format(date, \"MMMM yyyy\")}</h4>\n      <TransparentButton\n        onClick={(e) => {\n          e.preventDefault();\n          right();\n        }}\n      >\n        <FaCaretRight />\n      </TransparentButton>\n    </Wrapper>\n  );\n});\n","import styled from \"styled-components\";\n\nexport const Button = styled.button`\n  padding: 10px;\n  background: #fff;\n  border: 1px solid #edebe9;\n  border-radius: 4px;\n  svg {\n    margin-left: 10px;\n  }\n`;\n","import React from \"react\";\nimport { format } from \"date-fns\";\nimport { FaRegCalendarAlt } from \"react-icons/fa\";\nimport { Button } from \"./style\";\n\nexport const DatePickerButton: React.FC<{\n  selectedDate: Date;\n  onClick: () => void;\n}> = React.memo(({ selectedDate, onClick }) => {\n  return (\n    <Button\n      type=\"button\"\n      onClick={(e) => {\n        e.stopPropagation();\n        onClick();\n      }}\n    >\n      {format(selectedDate, \"do MMMM Y\")}\n      <FaRegCalendarAlt />\n    </Button>\n  );\n});\n","import React, { useState, useCallback } from \"react\";\nimport {\n  getDaysInMonth,\n  startOfMonth,\n  getDay,\n  addDays,\n  addMonths,\n  subMonths,\n  endOfMonth,\n  subDays,\n  isSameDay,\n  isSameMonth,\n  startOfDay,\n} from \"date-fns\";\nimport { Wrapper, Container, DayWrapper } from \"./style\";\nimport { Date } from \"./Date\";\nimport { Controls } from \"./Controls\";\nimport { DatePickerButton } from \"./DatePickerButton\";\nimport { useOutsideClick } from \"../../hooks/useOutsideClick\";\n\nexport const DatePicker: React.FC<{\n  selectedDate: Date;\n  changeDate: (date: Date) => void;\n  close: () => void;\n  setOpen: (isOpen: boolean) => void;\n  isOpen: boolean;\n  singleClick?: boolean;\n}> = React.memo(\n  ({\n    selectedDate,\n    changeDate,\n    close,\n    setOpen,\n    isOpen,\n    singleClick = false,\n  }) => {\n    const [date, setDate] = useState(startOfDay(selectedDate));\n    const dayHeadings = [\"M\", \"T\", \"W\", \"T\", \"F\", \"S\", \"S\"];\n    const padding = getDay(startOfMonth(date));\n    const paddingDays = padding === 0 ? 6 : padding - 1;\n    const daysInMonth = getDaysInMonth(date);\n    const futureDays = 42 - paddingDays - daysInMonth;\n    const handleClick = (day: Date) => {\n      changeDate(day);\n      setDate(startOfDay(day));\n      if (singleClick) close();\n    };\n\n    const ref = React.createRef<HTMLDivElement>();\n    const prevDays = Array(paddingDays)\n      .fill(0)\n      .map((_, i) =>\n        subDays(endOfMonth(subMonths(date, 1)), paddingDays - i - 1)\n      );\n\n    const days = Array(daysInMonth)\n      .fill(1)\n      .map((_, i) => addDays(startOfMonth(date), i));\n\n    const nextDays = Array(futureDays > 0 ? futureDays : 0)\n      .fill(0)\n      .map((_, i) => addDays(startOfMonth(addMonths(date, 1)), i));\n\n    const sameMonth = (day: Date): boolean => {\n      return day && isSameMonth(day, date) ? true : false;\n    };\n\n    useOutsideClick(\n      ref,\n      useCallback(() => {\n        if (isOpen) {\n          close();\n          setDate(startOfDay(selectedDate));\n        }\n      }, [selectedDate, isOpen, close])\n    );\n\n    if (!isOpen && !isSameDay(selectedDate, date))\n      setDate(startOfDay(selectedDate)); // temp fix\n    return (\n      <Wrapper ref={ref}>\n        <DatePickerButton\n          selectedDate={selectedDate}\n          onClick={() => {\n            setOpen(!isOpen);\n          }}\n        />\n        {isOpen && (\n          <Container onClick={(e) => e.stopPropagation()}>\n            <Controls\n              date={date}\n              left={() => setDate(subMonths(date, 1))}\n              right={() => setDate(addMonths(date, 1))}\n            />\n            <DayWrapper>\n              {dayHeadings.map((day, index) => (\n                <Date\n                  key={day + index}\n                  heading={day}\n                  isSelected={false}\n                  isSameMonth={false}\n                />\n              ))}\n              {prevDays.map((day) => (\n                <Date\n                  key={day.toISOString()}\n                  date={day}\n                  onClick={handleClick}\n                  isSelected={isSameDay(day, selectedDate)}\n                  isSameMonth={sameMonth(day)}\n                />\n              ))}\n              {days.map((day) => (\n                <Date\n                  key={day.toISOString()}\n                  date={day}\n                  onClick={handleClick}\n                  isSelected={isSameDay(day, selectedDate)}\n                  isSameMonth={sameMonth(day)}\n                />\n              ))}\n              {nextDays.map((day) => (\n                <Date\n                  key={day.toISOString()}\n                  date={day}\n                  onClick={handleClick}\n                  isSelected={isSameDay(day, selectedDate)}\n                  isSameMonth={sameMonth(day)}\n                />\n              ))}\n            </DayWrapper>\n          </Container>\n        )}\n      </Wrapper>\n    );\n  }\n);\n","import { useEffect } from \"react\";\n\nexport function useOutsideClick(\n  ref: React.MutableRefObject<any>,\n  handler: (event: any) => void\n) {\n  useEffect(() => {\n    const listener = (event: { target: any }) => {\n      if (!ref.current || ref.current.contains(event.target)) {\n        return;\n      }\n      handler(event);\n    };\n\n    document.addEventListener(\"mousedown\", listener);\n    document.addEventListener(\"touchstart\", listener);\n\n    return () => {\n      document.removeEventListener(\"mousedown\", listener);\n      document.removeEventListener(\"touchstart\", listener);\n    };\n  }, [ref, handler]);\n}\n","import styled from \"styled-components\";\n\nexport const Wrapper = styled.div`\n  padding: 20px;\n  margin: 1px;\n  display: flex;\n  flex-direction: column;\n  min-width: 300px;\n\n  @media only screen and (max-width: 430px) {\n    min-width: 200px;\n  }\n`;\nexport const SeriesContainer = styled.span`\n  display: flex;\n  z-index: 1;\n  div:first-child {\n    margin-right: 5px;\n  }\n  div:last-child {\n    margin-left: 5px;\n  }\n`;\n\nexport const Form = styled.form`\n  display: flex;\n  flex-direction: column;\n`;\n\nexport const Input = styled.input`\n  padding: 10px;\n  border: 1px solid #edebe9;\n  border-radius: 4px;\n  margin-top: 10px;\n`;\n\nexport const Select = styled.select`\n  background: #fff;\n  padding: 10px;\n  border: 1px solid #edebe9;\n  border-radius: 4px;\n  display: flex;\n  flex: 1;\n  :first-child {\n    margin-right: 5px;\n  }\n  :last-child {\n    margin-left: 5px;\n  }\n`;\n\nexport const SubmitButton = styled.button`\n  margin-top: 10px;\n  padding: 10px;\n  border: none;\n  background: #2296f3;\n  color: #fff;\n  border-radius: 4px;\n  :disabled {\n    opacity: 0.4;\n  }\n`;\n\nexport const ListWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  height: 200px;\n  border: 1px solid #eaeaea;\n`;\n\nexport const SeriesSpan = styled.span`\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n\n  p,\n  h3 {\n    margin: 0;\n  }\n  p {\n    font-size: 0.9em;\n  }\n  h3 {\n    font-size: 1.1em;\n  }\n\n  :not(:first-child) {\n    margin-top: 10px;\n  }\n`;\n\nexport const ButtonSpan = styled(SeriesSpan)`\n  flex-direction: row;\n  button {\n    flex: 1;\n    :first-child {\n      margin-right: 5px;\n      background: #f32222;\n    }\n    :last-child {\n      margin-left: 5px;\n    }\n  }\n`;\n\nexport const SeriesRow = styled.div.attrs((props: { color: string }) => ({}))<{\n  color: string;\n}>`\n  font-size: 0.9em;\n  text-align: left;\n  display: flex;\n  justify-content: space-between;\n  cursor: pointer;\n  p {\n    margin: 0;\n  }\n  div {\n    display: flex;\n  }\n  span {\n    background: ${({ color }) => color};\n    width: 5px;\n    height: 100%;\n    margin-right: 5px;\n  }\n`;\n\nexport const Button = styled.button`\n  border: none;\n  background: transparent;\n  padding: 5px;\n`;\n","import styled from \"styled-components\";\n\nexport const Select = styled.select`\n  background: #fff;\n  padding: 10px;\n  border: 1px solid #edebe9;\n  border-radius: 4px;\n  display: flex;\n  flex: 1;\n  :first-child {\n    margin-right: 5px;\n  }\n  :last-child {\n    margin-left: 5px;\n  }\n`;\n\nexport const CheckBoxContainer = styled.span`\n  margin-top: 10px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font: 400 13.3333px Arial;\n  input:not(:last-child) {\n    margin-right: 10px;\n  }\n  input:last-child {\n    margin-right: 0;\n  }\n`;\n","import React from \"react\";\nimport { getTimeSlots } from \"../../../helpers/getTimeSlots\";\nimport { Select } from \"./style\";\n\nexport const StartEndTime: React.FC<{\n  startTime: string | undefined;\n  endTime: string | undefined;\n  setStartTime: React.Dispatch<React.SetStateAction<string | undefined>>;\n  setEndTime: React.Dispatch<React.SetStateAction<string | undefined>>;\n}> = ({ startTime, endTime, setStartTime, setEndTime }) => {\n  const options = getTimeSlots(15, 8, 17.15);\n  return (\n    <div style={{ display: \"flex\", marginTop: \"10px\" }}>\n      <Select\n        style={{ color: !startTime ? \"#7d7d7d\" : \"#000\" }}\n        value={options.indexOf(startTime)}\n        onChange={(e) => {\n          if (e.target.selectedIndex > 0)\n            setStartTime(options[e.target.selectedIndex - 1]);\n        }}\n      >\n        <option disabled={startTime ? true : false}>Start Time</option>\n        {options\n          .filter((_, index) => index < options.length - 1)\n          .map((option, index) => (\n            <option key={index} value={index}>\n              {option}\n            </option>\n          ))}\n      </Select>\n      <Select\n        style={{ color: !endTime ? \"#7d7d7d\" : \"#000\" }}\n        value={options.indexOf(endTime)}\n        onChange={(e) => {\n          if (e.target.selectedIndex > 0)\n            setEndTime(options[e.target.selectedIndex - 1]);\n        }}\n      >\n        <option disabled={endTime ? true : false}>End Time</option>\n        {options.map((option, index) => (\n          <option key={index} value={index}>\n            {option}\n          </option>\n        ))}\n      </Select>\n    </div>\n  );\n};\n","export const getTimeSlots = (\n  interval: number,\n  startTime: number,\n  endTime: number\n): any[] => {\n  const times = [];\n  let start = startTime * 60;\n\n  for (var i = 0; start < endTime * 60; i++) {\n    var hh = Math.floor(start / 60); // hours of day in 0-24 format\n    var mm = start % 60; // minutes of the hour in 0-55 format\n    times[i] = (\"0\" + hh).slice(-2) + \":\" + (\"0\" + mm).slice(-2); // pushing data in array in [00:00 - 12:00 AM/PM format]\n    start = start + interval;\n  }\n\n  return times;\n};\n","import { Class } from \"../../../store/types\";\nimport { useTypedSelector } from \"../../../store\";\nimport { Select } from \"./style\";\nimport React from \"react\";\n\nexport const ClassAndSeriesControls: React.FC<{\n  series: boolean;\n  setSeries: React.Dispatch<React.SetStateAction<boolean>>;\n  classGroup: Class | undefined;\n  setClassGroup: React.Dispatch<React.SetStateAction<Class | undefined>>;\n}> = ({ series, setSeries, classGroup, setClassGroup }) => {\n  const classOptions = useTypedSelector((state) => state.classes);\n  return (\n    <div style={{ display: \"flex\", marginTop: \"10px\", alignItems: \"center\" }}>\n      <Select\n        style={{ color: !classGroup ? \"#7d7d7d\" : \"#000\" }}\n        value={classGroup && classOptions.indexOf(classGroup)}\n        onChange={(e) => {\n          if (e.target.selectedIndex > 0)\n            setClassGroup(classOptions[e.target.selectedIndex - 1]);\n        }}\n      >\n        <option disabled={classGroup ? true : false}>Class</option>\n        {classOptions.map((option, index) => (\n          <option key={index} value={index}>\n            {option.year + option.group}\n          </option>\n        ))}\n      </Select>\n      <span\n        style={{\n          flex: 1,\n          marginLeft: \"5px\",\n          padding: \"10px\",\n          border: \"1px solid transparent\",\n        }}\n      >\n        <label>Series</label>\n        <input\n          type=\"checkbox\"\n          checked={series}\n          onChange={() => setSeries(!series)}\n        />\n      </span>\n    </div>\n  );\n};\n","import React from \"react\";\nimport { CheckBoxContainer } from \"./style\";\n\nexport const MultiCheckbox: React.FC<{\n  checkboxState: {\n    monday: boolean;\n    tuesday: boolean;\n    wednesday: boolean;\n    thursday: boolean;\n    friday: boolean;\n  };\n  setCheckbox: React.Dispatch<\n    React.SetStateAction<{\n      monday: boolean;\n      tuesday: boolean;\n      wednesday: boolean;\n      thursday: boolean;\n      friday: boolean;\n    }>\n  >;\n}> = ({ checkboxState, setCheckbox }) => {\n  return (\n    <CheckBoxContainer>\n      <label>Mon</label>\n      <input\n        type=\"checkbox\"\n        checked={checkboxState.monday}\n        onChange={() =>\n          setCheckbox((checkboxState) => ({\n            ...checkboxState,\n            monday: !checkboxState.monday,\n          }))\n        }\n      />\n\n      <label>Tue</label>\n      <input\n        type=\"checkbox\"\n        checked={checkboxState.tuesday}\n        onChange={() =>\n          setCheckbox((checkboxState) => ({\n            ...checkboxState,\n            tuesday: !checkboxState.tuesday,\n          }))\n        }\n      />\n\n      <label>Wed</label>\n      <input\n        type=\"checkbox\"\n        checked={checkboxState.wednesday}\n        onChange={() =>\n          setCheckbox((checkboxState) => ({\n            ...checkboxState,\n            wednesday: !checkboxState.wednesday,\n          }))\n        }\n      />\n\n      <label>Thu</label>\n      <input\n        type=\"checkbox\"\n        checked={checkboxState.thursday}\n        onChange={() =>\n          setCheckbox((checkboxState) => ({\n            ...checkboxState,\n            thursday: !checkboxState.thursday,\n          }))\n        }\n      />\n\n      <label>Fri</label>\n      <input\n        type=\"checkbox\"\n        checked={checkboxState.friday}\n        onChange={() =>\n          setCheckbox((checkboxState) => ({\n            ...checkboxState,\n            friday: !checkboxState.friday,\n          }))\n        }\n      />\n    </CheckBoxContainer>\n  );\n};\n","import React, { useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { startOfDay, addWeeks } from \"date-fns\";\nimport { Wrapper, Form, Input, SubmitButton, SeriesContainer } from \"./style\";\nimport { Class, Lesson } from \"../../store/types\";\nimport { actions } from \"../../store/actions\";\nimport { DatePicker } from \"../DatePicker\";\nimport { StartEndTime } from \"./Controls/StartEndTime\";\nimport { ClassAndSeriesControls } from \"./Controls/ClassAndSeries\";\nimport { MultiCheckbox } from \"./Controls/MultiCheckbox\";\n\nexport const NewLessonForm: React.FC<{\n  initialDate: string;\n}> = ({ initialDate }) => {\n  const dispatch = useDispatch();\n  const [date, setDate] = useState(new Date(initialDate));\n  const [isOpen, setOpen] = useState(false);\n  const [seriesStartOpen, setSeriesStartOpen] = useState(false);\n  const [seriesEndOpen, setSeriesEndOpen] = useState(false);\n  const [classGroup, setClassGroup] = useState(undefined as undefined | Class);\n  const [startTime, setStartTime] = useState(undefined as undefined | string);\n  const [seriesStart, setSeriesStart] = useState(date);\n  const [seriesEnd, setSeriesEnd] = useState(addWeeks(date, 1));\n  const [series, setSeries] = useState(false);\n  const [endTime, setEndTime] = useState(undefined as undefined | string);\n  const [subject, updateSubject] = useState(\"\");\n  const [checkboxState, setCheckbox] = useState({\n    monday: false,\n    tuesday: false,\n    wednesday: false,\n    thursday: false,\n    friday: false,\n  });\n  return (\n    <Wrapper>\n      <h3 style={{ margin: 0 }}>New Lesson</h3>\n      <img\n        style={{ margin: \"20px\" }}\n        height=\"100px\"\n        src={process.env.PUBLIC_URL + \"/calendar.svg\"}\n        alt=\"New Lesson Icon\"\n      />\n      <Form\n        onSubmit={(e) => {\n          e.preventDefault();\n          if (startTime && endTime && classGroup) {\n            if (!series) {\n              dispatch(\n                actions.newLessonCreated({\n                  id: uuidv4(),\n                  start: new Date(\n                    new Date(date.setHours(parseFloat(startTime))).setMinutes(\n                      parseFloat(startTime.slice(-2))\n                    )\n                  ).toISOString(),\n                  end: new Date(\n                    new Date(date.setHours(parseFloat(endTime))).setMinutes(\n                      parseFloat(endTime.slice(-2))\n                    )\n                  ).toISOString(),\n                  subject,\n                  teacherId: \"01\",\n                  class: classGroup?.id,\n                } as Lesson)\n              );\n            } else {\n              dispatch(\n                actions.newSeriesCreated({\n                  lesson: {\n                    start: new Date(\n                      new Date(date.setHours(parseFloat(startTime))).setMinutes(\n                        parseFloat(startTime.slice(-2))\n                      )\n                    ).toISOString(),\n                    end: new Date(\n                      new Date(date.setHours(parseFloat(endTime))).setMinutes(\n                        parseFloat(endTime.slice(-2))\n                      )\n                    ).toISOString(),\n                    subject,\n                    teacherId: \"01\",\n                    seriesId: uuidv4(),\n                    class: classGroup?.id,\n                  },\n                  series: {\n                    start: seriesStart,\n                    end: seriesEnd,\n                    days: checkboxState,\n                  },\n                })\n              );\n            }\n          }\n        }}\n      >\n        {series ? (\n          <SeriesContainer>\n            <DatePicker\n              close={() => setSeriesStartOpen(false)}\n              setOpen={setSeriesStartOpen}\n              isOpen={seriesStartOpen}\n              changeDate={(date) => setSeriesStart(startOfDay(date))}\n              selectedDate={startOfDay(seriesStart)}\n              singleClick\n            />\n            <DatePicker\n              close={() => setSeriesEndOpen(false)}\n              setOpen={setSeriesEndOpen}\n              isOpen={seriesEndOpen}\n              changeDate={(date) => setSeriesEnd(startOfDay(date))}\n              selectedDate={startOfDay(seriesEnd)}\n              singleClick\n            />\n          </SeriesContainer>\n        ) : (\n          <DatePicker\n            close={() => setOpen(false)}\n            setOpen={setOpen}\n            isOpen={isOpen}\n            changeDate={(date) => setDate(startOfDay(date))}\n            selectedDate={startOfDay(date ? date : new Date(initialDate))}\n            singleClick\n          />\n        )}\n\n        <Input\n          placeholder=\"Subject\"\n          value={subject}\n          onChange={(e) => updateSubject(e.target.value)}\n        ></Input>\n        <StartEndTime\n          startTime={startTime}\n          endTime={endTime}\n          setStartTime={setStartTime}\n          setEndTime={setEndTime}\n        />\n        <ClassAndSeriesControls\n          series={series}\n          setSeries={setSeries}\n          classGroup={classGroup}\n          setClassGroup={setClassGroup}\n        />\n        {series && (\n          <MultiCheckbox\n            setCheckbox={setCheckbox}\n            checkboxState={checkboxState}\n          />\n        )}\n        <SubmitButton\n          disabled={\n            !startTime ||\n            !endTime ||\n            !subject ||\n            !classGroup ||\n            (series && !Object.values(checkboxState).includes(true))\n          }\n          type=\"submit\"\n        >\n          Create\n        </SubmitButton>\n      </Form>\n    </Wrapper>\n  );\n};\n","import React, { useState } from \"react\";\nimport { Header, AddButton, ResetButton } from \"./style\";\nimport { useDispatch } from \"react-redux\";\nimport { Popup } from \"../../Popup\";\nimport { FaUndo, FaPlus } from \"react-icons/fa\";\nimport { DatePicker } from \"../../DatePicker\";\nimport { actions } from \"../../../store/actions\";\nimport { startOfDay, isSameDay } from \"date-fns\";\nimport { useKeyboardEvent } from \"../../../hooks/useKeyboardEvent\";\nimport { useTypedSelector } from \"../../../store\";\nimport { NewLessonForm } from \"../../Forms/NewLessonForm\";\n\nexport const TimelineHeader: React.FC<{\n  selectedDate: string;\n}> = React.memo(({ selectedDate }) => {\n  const dispatch = useDispatch();\n  const [isOpen, setOpen] = useState(false);\n  const [isVisible, setVisibility] = useState(false);\n  const initialDate = useTypedSelector((state) => state.selectedDate);\n  useKeyboardEvent(\"Escape\", () => {\n    setOpen(false);\n  });\n  return (\n    <Header>\n      <Popup\n        isVisible={isVisible}\n        onClick={() => {\n          setVisibility(false);\n          dispatch(actions.popupClosed());\n        }}\n        scrollLock\n      >\n        <NewLessonForm initialDate={initialDate} />\n      </Popup>\n      <h1>Availability</h1>\n      <span>\n        <DatePicker\n          close={() => setOpen(false)}\n          setOpen={setOpen}\n          isOpen={isOpen}\n          changeDate={(date) =>\n            dispatch(actions.selectedDayChanged(startOfDay(new Date(date))))\n          }\n          selectedDate={new Date(selectedDate)}\n        />\n        <ResetButton\n          onClick={() =>\n            !isSameDay(new Date(selectedDate), new Date())\n              ? dispatch(actions.selectedDayChanged(startOfDay(new Date())))\n              : void {}\n          }\n          title=\"Reset date to present\"\n        >\n          <FaUndo />\n        </ResetButton>\n        <AddButton\n          onClick={() => {\n            setVisibility(true);\n            dispatch(actions.popupOpened());\n          }}\n          title=\"Add lesson\"\n        >\n          <FaPlus />\n        </AddButton>\n      </span>\n    </Header>\n  );\n});\n","import React from \"react\";\nimport { DayTimeline } from \"./DayTimeline\";\nimport { MonthTimeline } from \"./MonthTimeline\";\nimport {\n  Wrapper,\n  Span,\n  Fade,\n  RightFade,\n  BottomFade,\n  BottomRightFade,\n} from \"./style\";\nimport { startOfYear, startOfMonth } from \"date-fns\";\nimport { TimelineHeader } from \"./TimelineHeader\";\nimport { useTypedSelector } from \"../../store\";\n\nexport const Timeline = () => {\n  const selectedDate = useTypedSelector((state) => state.selectedDate);\n  const yearStart = startOfYear(new Date(selectedDate)).toISOString();\n  const monthStart = startOfMonth(new Date(selectedDate)).toISOString();\n  return (\n    <>\n      <TimelineHeader selectedDate={selectedDate} />\n      {/* <Span>\n        <Fade /> */}\n      <Wrapper>\n        <MonthTimeline startOfYear={yearStart} />\n      </Wrapper>\n      {/* <RightFade />\n      </Span>\n      <Span>\n        <BottomFade /> */}\n      <Wrapper>\n        <DayTimeline startOfMonth={monthStart} />\n      </Wrapper>\n      {/* <BottomRightFade />\n      </Span> */}\n    </>\n  );\n};\n","import styled from \"styled-components\";\n\nexport const Wrapper = styled.div.attrs<{\n  padding: string;\n}>((props) => ({\n  style: { padding: props.padding },\n}))<{ padding: string }>`\n  display: flex;\n  flex: 1;\n  position: relative;\n  overflow: auto;\n`;\n\nexport const AxisWrapper = styled.div.attrs<{\n  height: string;\n}>((props) => ({\n  style: { height: props.height },\n}))<{ height: string }>`\n  position: relative;\n`;\n\nexport const GridContainer = styled.div`\n  position: relative;\n  display: flex;\n  flex: 1;\n  margin-left: 20px;\n`;\n\nexport const Tick = styled.div.attrs<{\n  transform: string;\n}>((props) => ({\n  style: { transform: props.transform },\n}))<{ transform: string }>`\n  font-size: 0.7em;\n  color: #abb1b6;\n  line-height: 0; /* Line up the *middle* of the number, not its baseline, with its value */\n`;\n\nexport const Rect = styled.rect.attrs<{\n  transform: string;\n}>((props) => ({\n  style: { transform: props.transform },\n}))<{ transform: string }>`\n  position: absolute;\n  width: 100%;\n  border-bottom: 1px dotted #edebe9;\n  line-height: 0; /* Line up the *middle* of the number, not its baseline, with its value */\n`;\n\nexport const LessonWrapper = styled.rect.attrs<{\n  transform: string;\n  height: string;\n  colour: string;\n  smallHeight: boolean;\n}>((props) => ({\n  style: {\n    transform: props.transform,\n    height: props.height,\n    background: props.colour,\n  },\n}))<{\n  transform: string;\n  height: string;\n  colour: string;\n  smallHeight: boolean;\n}>`\n  display: flex;\n  flex: 1;\n  align-items: center;\n  justify-content: space-between;\n  flex-direction: row;\n  position: absolute;\n  width: calc(100% - 40px);\n  padding: 0 20px;\n  background: #2296f3;\n  color: #fff;\n  border-radius: 4px;\n  cursor: pointer;\n  transition: 0.3s;\n  opacity: 0.8;\n  overflow: hidden;\n  z-index: 1;\n\n  :hover {\n    opacity: 0.9;\n  }\n\n  span {\n    display: flex;\n    flex-direction: ${({ smallHeight }) => (smallHeight ? \"row\" : \"column\")};\n    line-height: 1em;\n\n    h4 {\n      margin-right: ${({ smallHeight }) => (smallHeight ? \"5px\" : \"0\")};\n    }\n  }\n  button {\n    border: none;\n    color: #fff;\n    background: none;\n  }\n`;\n\nexport const SubjectText = styled.h4`\n  margin: 0;\n  font-weight: 600;\n  font-size: 0.8em;\n`;\n\nexport const TimeText = styled.p`\n  margin: 0;\n  font-size: 0.7em;\n`;\n","import React from \"react\";\nimport { format } from \"date-fns\";\nimport { ScaleLinear, ScaleTime } from \"d3\";\nimport { AxisWrapper, Tick } from \"./style\";\n\nexport const Axis: React.FC<{\n  scale: ScaleLinear<number, number> | ScaleTime<number, number>;\n  tickHeight?: number;\n}> = ({ scale, tickHeight = 30 }) => {\n  const height = scale.range()[0];\n\n  const ticks = (\n    scale: ScaleLinear<number, number> | ScaleTime<number, number>,\n    height: number,\n    tickHeight: number\n  ) => {\n    try {\n      const maxNumber = Math.max(Math.floor(height / tickHeight), 1);\n      const ticks: any = scale.ticks(maxNumber);\n      return ticks.length < maxNumber\n        ? ticks\n        : ticks.filter((_: any, i: number) => i % 2 === 0);\n    } catch (error) {\n      return [];\n    }\n  };\n  return (\n    <AxisWrapper height={`${height}px`}>\n      {ticks(scale, height, tickHeight).map((tick: Date) => (\n        <Tick\n          key={tick.toISOString()}\n          transform={`translateY(${scale(tick).toFixed(0)}px)`}\n        >\n          {format(tick, \"kk:mm\")}\n        </Tick>\n      ))}\n    </AxisWrapper>\n  );\n};\n","import React from \"react\";\nimport { useDrag } from \"react-dnd\";\nimport { ScaleTime } from \"d3\";\nimport { format, startOfDay, differenceInHours } from \"date-fns\";\nimport { LessonWrapper, SubjectText, TimeText } from \"./style\";\nimport { Lesson as LessonType } from \"../../store/types\";\nimport { useDispatch } from \"react-redux\";\nimport { actions } from \"../../store/actions\";\nimport { FaTimes } from \"react-icons/fa\";\n\nexport const Lesson: React.FC<{\n  lesson: LessonType;\n  scale: ScaleTime<number, number>;\n  colour: string;\n  isFocussed: boolean;\n}> = React.memo(({ lesson, scale, colour, isFocussed }) => {\n  const dispatch = useDispatch();\n  const handleClick = (e: React.MouseEvent<SVGRectElement, MouseEvent>) => {\n    dispatch(actions.lessonFocussed(lesson));\n    e.currentTarget.scrollIntoView({\n      behavior: \"smooth\",\n      block: \"start\",\n    });\n  };\n\n  const [, drag] = useDrag({\n    item: { type: \"*\", id: lesson.id },\n    collect: (monitor) => ({\n      opacity: monitor.isDragging() ? 0.8 : 1,\n    }),\n  });\n\n  const start = new Date(lesson.start);\n  const end = new Date(lesson.end);\n  return (\n    <LessonWrapper\n      tabIndex={0}\n      colour={colour}\n      ref={drag}\n      onClick={handleClick}\n      style={{ zIndex: isFocussed ? 2 : 1 }}\n      height={`${scale(end) - scale(start)}px`}\n      transform={`translateY(${scale(start).toFixed(0)}px)`}\n      smallHeight={differenceInHours(end, start) < 1}\n      key={lesson.id}\n    >\n      <span>\n        <SubjectText>{lesson.subject}</SubjectText>\n        <TimeText>{`${format(start, \"H:mm\")} - ${format(\n          end,\n          \"H:mm\"\n        )}`}</TimeText>\n      </span>\n\n      <button\n        onClick={(e) => {\n          e.stopPropagation();\n          dispatch(\n            actions.lessonDeleted({\n              key: startOfDay(start).toISOString(),\n              id: lesson.id,\n            })\n          );\n        }}\n      >\n        <FaTimes />\n      </button>\n    </LessonWrapper>\n  );\n});\n","import React from \"react\";\nimport { ScaleLinear, ScaleTime } from \"d3\";\nimport { Rect } from \"./style\";\n\nexport const GridLines: React.FC<{\n  scale: ScaleLinear<number, number> | ScaleTime<number, number>;\n  tickHeight?: number;\n}> = ({ scale, tickHeight = 30 }) => {\n  const height = scale.range()[0];\n\n  const ticks = (\n    scale: ScaleLinear<number, number> | ScaleTime<number, number>,\n    height: number,\n    tickHeight: number\n  ) => {\n    try {\n      const maxNumber = Math.max(Math.floor(height / tickHeight), 1);\n      const ticks: any = scale.ticks(maxNumber);\n      return ticks.length < maxNumber\n        ? ticks\n        : ticks.filter((_: any, i: number) => i % 2 === 0);\n    } catch (error) {\n      return [];\n    }\n  };\n  return ticks(scale, height, tickHeight).map((tick: Date) => (\n    <>\n      <Rect\n        key={tick.toISOString()}\n        transform={`translateY(${scale(tick).toFixed(0)}px)`}\n      />\n    </>\n  ));\n};\n","import React, { useState } from \"react\";\nimport { ScaleLinear, ScaleTime } from \"d3\";\nimport { useDrop } from \"react-dnd\";\nimport { useDispatch } from \"react-redux\";\nimport { actions } from \"../../store/actions\";\n\nexport const DropContainers: React.FC<{\n  scale: ScaleLinear<number, number> | ScaleTime<number, number>;\n  tickHeight?: number;\n}> = ({ scale, tickHeight = 30 }) => {\n  const height = scale.range()[0];\n\n  const ticks = (\n    scale: ScaleLinear<number, number> | ScaleTime<number, number>,\n    height: number,\n    tickHeight: number\n  ) => {\n    try {\n      const maxNumber = Math.max(Math.floor(height / tickHeight), 1);\n      const ticks: any = scale.ticks(maxNumber);\n      return ticks.length < maxNumber\n        ? ticks\n        : ticks.filter((_: any, i: number) => i % 2 === 0);\n    } catch (error) {\n      return [];\n    }\n  };\n  const startHeight = new Date(\"2020-07-20T06:00:00.000Z\");\n  const endHeight = new Date(\"2020-07-20T06:15:00.000Z\");\n  const containerHeight = `${scale(endHeight) - scale(startHeight)}px`;\n  return ticks(scale, height, tickHeight).map((tick: Date) => (\n    <>\n      <DropContainer\n        id={tick.toISOString()}\n        tick={scale(tick)}\n        height={containerHeight}\n      />\n    </>\n  ));\n};\n\nconst DropContainer: React.FC<{\n  id: string;\n  tick: number;\n  height: string;\n}> = ({ id, tick, height }) => {\n  const dispatch = useDispatch();\n  const [borderTop, setBorderTop] = useState(\"none\");\n\n  const [{ canDrop, isOver }, drop] = useDrop({\n    drop: (item, monitor) => {\n      const didDrop = monitor.didDrop();\n      if (didDrop) return;\n      if (canDrop)\n        dispatch(\n          actions.updateStartTime({ id: monitor.getItem().id, time: id })\n        );\n    },\n    accept: \"*\",\n    collect: (monitor: { isOver: () => any; canDrop: () => any }) => ({\n      isOver: monitor.isOver(),\n      canDrop: monitor.canDrop(),\n    }),\n  });\n\n  if (isOver && borderTop === \"none\")\n    setBorderTop(\"2px solid rgba(34,150,243, 1)\");\n\n  if (!isOver && borderTop !== \"none\") setBorderTop(\"none\");\n  return (\n    <div\n      key={id}\n      ref={drop}\n      style={{\n        position: \"absolute\",\n        transform: `translateY(${tick.toFixed(0)}px)`,\n        height: height,\n        zIndex: 1,\n        width: \"100%\",\n        borderTop,\n      }}\n    />\n  );\n};\n","import React from \"react\";\nimport { Wrapper, GridContainer } from \"./style\";\nimport { useTypedSelector } from \"../../store\";\nimport { scaleTime } from \"d3\";\nimport { Axis } from \"./Axis\";\n\nimport { Lesson } from \"./Lesson\";\nimport { GridLines } from \"./GridLines\";\nimport { DropContainers } from \"./DropContainers\";\n\nexport const Schedule = () => {\n  const lessons = useTypedSelector(\n    (state) => state.lessons[state.selectedDate]\n  );\n  const focussedLesson = useTypedSelector((state) => state.focussedLesson);\n  const day = useTypedSelector((state) => state.selectedDate);\n  const tickHeight = 35;\n\n  const scale = scaleTime()\n    .range([tickHeight * 15, 0])\n    .domain([\n      new Date(new Date(day).setHours(parseFloat(\"17:00\"))),\n      new Date(new Date(day).setHours(parseFloat(\"08:00\"))),\n    ]);\n\n  return (\n    <Wrapper\n      padding={`${\n        scale(new Date(\"2020-07-20T06:00:00.000Z\")) -\n        scale(new Date(\"2020-07-20T05:00:00.000Z\"))\n      }px 20px`}\n    >\n      <Axis tickHeight={tickHeight} scale={scale} />\n      <GridContainer>\n        <GridLines tickHeight={tickHeight} scale={scale} />\n        <DropContainers tickHeight={tickHeight / 4} scale={scale} />\n        {lessons &&\n          lessons.map((lesson, i) => (\n            <Lesson\n              colour={lesson.color}\n              key={lesson.id}\n              lesson={lesson}\n              scale={scale}\n              isFocussed={focussedLesson?.id === lesson.id ?? false}\n            />\n          ))}\n      </GridContainer>\n    </Wrapper>\n  );\n};\n","import styled from \"styled-components\";\nimport { animated } from \"react-spring\";\n\nexport const Wrapper = styled(animated.div).attrs<{\n  background: string | undefined;\n}>((props) => ({\n  style: { background: props.background ? props.background : \"transparent\" },\n}))<{ background: string | undefined }>`\n  display: flex;\n  flex-direction: column;\n  padding: 30px 20px;\n  align-items: center;\n  flex: 1;\n  img {\n    width: 80%;\n  }\n`;\n\nexport const ButtonBar = styled.span`\n  display: flex;\n  justify-content: center;\n  margin-top: 20px;\n`;\nexport const Section = styled.span`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-top: 20px;\n`;\nexport const Heading = styled.h2`\n  color: #fff;\n  display: flex;\n  flex: 1;\n  margin: 0;\n  text-align: center;\n  font-size: 1.3em;\n  font-weight: 600;\n`;\n\nexport const SubHeading = styled.p`\n  color: #fff;\n  display: flex;\n  flex: 1;\n  margin: 0;\n  font-weight: 0;\n  text-align: center;\n`;\n\nexport const Button = styled.button`\n  border: none;\n  color: #fff;\n  background: none;\n  display: flex;\n  align-items: center;\n`;\n\nexport const LinkedButton = styled(Button).attrs<{\n  isLinked: string;\n}>((props) => ({}))<{ isLinked: boolean }>`\n  svg {\n    opacity: ${(props) => (props.isLinked ? \"1\" : \"0.6\")};\n  }\n  :hover svg {\n    opacity: 1;\n  }\n`;\n\nexport const CloseButton = styled(Button)`\n  position: absolute;\n  top: 10px;\n  right: 10px;\n`;\n\nexport const ButtonSpan = styled.span`\n  display: flex;\n  button,\n  h2 {\n    padding: 0 5px;\n  }\n`;\n","import React, { useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { startOfDay, format, addWeeks } from \"date-fns\";\nimport { Lesson } from \"../../store/types\";\nimport { actions } from \"../../store/actions\";\nimport { DatePicker } from \"../DatePicker\";\nimport { StartEndTime } from \"./Controls/StartEndTime\";\nimport { useTypedSelector } from \"../../store\";\nimport { ClassAndSeriesControls } from \"./Controls/ClassAndSeries\";\nimport { MultiCheckbox } from \"./Controls/MultiCheckbox\";\nimport { Wrapper, Form, Input, SubmitButton, SeriesContainer } from \"./style\";\n\nexport const EditLessonForm: React.FC<{\n  initialDate: string;\n  lesson: Lesson;\n}> = ({ initialDate, lesson }) => {\n  const dispatch = useDispatch();\n  const classOptions = useTypedSelector((state) => state.classes);\n  const [date, setDate] = useState(new Date(initialDate));\n  const [isOpen, setOpen] = useState(false);\n  const [seriesStartOpen, setSeriesStartOpen] = useState(false);\n  const [seriesEndOpen, setSeriesEndOpen] = useState(false);\n  const [classGroup, setClassGroup] = useState(\n    classOptions.find((c) => c.id === lesson.class)\n  );\n\n  const [startTime, setStartTime] = useState(\n    `${format(new Date(lesson.start), \"HH\")}:${format(\n      new Date(lesson.start),\n      \"mm\"\n    )}` as string | undefined\n  );\n  const [endTime, setEndTime] = useState(\n    `${format(new Date(lesson.end), \"HH\")}:${format(\n      new Date(lesson.end),\n      \"mm\"\n    )}` as string | undefined\n  );\n  const [subject, updateSubject] = useState(lesson.subject);\n  const [series, setSeries] = useState(false);\n  const [seriesStart, setSeriesStart] = useState(date);\n  const [seriesEnd, setSeriesEnd] = useState(addWeeks(date, 1));\n  const [checkboxState, setCheckbox] = useState({\n    monday: false,\n    tuesday: false,\n    wednesday: false,\n    thursday: false,\n    friday: false,\n  });\n  return (\n    <Wrapper>\n      <h3 style={{ margin: 0 }}>Edit Lesson</h3>\n      <img\n        style={{ margin: \"20px\" }}\n        height=\"100px\"\n        src={process.env.PUBLIC_URL + \"/edit_calendar.svg\"}\n        alt=\"Update Lesson Icon\"\n      />\n      <Form\n        onSubmit={(e) => {\n          e.preventDefault();\n          if (startTime && endTime && classGroup) {\n            if (!series) {\n              dispatch(\n                actions.lessonEdited({\n                  lesson: {\n                    id: lesson.id,\n                    start: new Date(\n                      new Date(date.setHours(parseFloat(startTime))).setMinutes(\n                        parseFloat(startTime.slice(-2))\n                      )\n                    ).toISOString(),\n                    end: new Date(\n                      new Date(date.setHours(parseFloat(endTime))).setMinutes(\n                        parseFloat(endTime.slice(-2))\n                      )\n                    ).toISOString(),\n                    subject,\n                    teacherId: \"01\",\n                    color: lesson.color,\n                    class: classGroup.id,\n                  },\n                  oldKey: initialDate,\n                })\n              );\n            } else {\n              dispatch(\n                actions.lessonEditedSeriesAdded({\n                  lesson: {\n                    id: lesson.id,\n                    start: new Date(\n                      new Date(date.setHours(parseFloat(startTime))).setMinutes(\n                        parseFloat(startTime.slice(-2))\n                      )\n                    ).toISOString(),\n                    end: new Date(\n                      new Date(date.setHours(parseFloat(endTime))).setMinutes(\n                        parseFloat(endTime.slice(-2))\n                      )\n                    ).toISOString(),\n                    subject,\n                    teacherId: \"01\",\n                    color: lesson.color,\n                    class: classGroup.id,\n                  },\n                  series: {\n                    start: seriesStart,\n                    end: seriesEnd,\n                    days: checkboxState,\n                  },\n                  oldKey: initialDate,\n                })\n              );\n            }\n          }\n        }}\n      >\n        {series ? (\n          <SeriesContainer>\n            <DatePicker\n              close={() => setSeriesStartOpen(false)}\n              setOpen={setSeriesStartOpen}\n              isOpen={seriesStartOpen}\n              changeDate={(date) => setSeriesStart(startOfDay(date))}\n              selectedDate={startOfDay(seriesStart)}\n              singleClick\n            />\n            <DatePicker\n              close={() => setSeriesEndOpen(false)}\n              setOpen={setSeriesEndOpen}\n              isOpen={seriesEndOpen}\n              changeDate={(date) => setSeriesEnd(startOfDay(date))}\n              selectedDate={startOfDay(seriesEnd)}\n              singleClick\n            />\n          </SeriesContainer>\n        ) : (\n          <DatePicker\n            close={() => setOpen(false)}\n            setOpen={setOpen}\n            isOpen={isOpen}\n            changeDate={(date) => setDate(startOfDay(date))}\n            selectedDate={startOfDay(date ? date : new Date(initialDate))}\n            singleClick\n          />\n        )}\n\n        <Input\n          placeholder=\"Subject\"\n          value={subject}\n          onChange={(e) => updateSubject(e.target.value)}\n        ></Input>\n        <StartEndTime\n          startTime={startTime}\n          endTime={endTime}\n          setStartTime={setStartTime}\n          setEndTime={setEndTime}\n        />\n\n        <ClassAndSeriesControls\n          series={series}\n          setSeries={setSeries}\n          classGroup={classGroup}\n          setClassGroup={setClassGroup}\n        />\n        {series && (\n          <MultiCheckbox\n            setCheckbox={setCheckbox}\n            checkboxState={checkboxState}\n          />\n        )}\n        <SubmitButton\n          disabled={\n            !startTime ||\n            !endTime ||\n            !subject ||\n            !classGroup ||\n            (series && !Object.values(checkboxState).includes(true))\n          }\n          type=\"submit\"\n        >\n          Update\n        </SubmitButton>\n      </Form>\n    </Wrapper>\n  );\n};\n","import React, { useState } from \"react\";\nimport {\n  List,\n  AutoSizer,\n  CellMeasurer,\n  CellMeasurerCache,\n} from \"react-virtualized\";\nimport { format, startOfDay } from \"date-fns\";\nimport { FaUnlink, FaTimes } from \"react-icons/fa\";\nimport { useDispatch } from \"react-redux\";\nimport { Lesson } from \"../../store/types\";\nimport { useTypedSelector } from \"../../store\";\nimport {\n  Wrapper,\n  Form,\n  SubmitButton,\n  ListWrapper,\n  SeriesSpan,\n  ButtonSpan,\n  SeriesRow,\n  Button,\n} from \"./style\";\nimport { actions } from \"../../store/actions\";\n\nexport const SeriesForm: React.FC<{\n  lesson: Lesson | undefined;\n  isOpen: (value: React.SetStateAction<boolean>) => void;\n}> = ({ lesson, isOpen }) => {\n  const dispatch = useDispatch();\n  const lessons = useTypedSelector((state) =>\n    Array.prototype.concat\n      .apply([], Object.values(state.lessons))\n      .filter((l: Lesson) => l.seriesId)\n      .filter((l) => l.seriesId === lesson?.seriesId ?? [])\n      .sort(function compare(a: Lesson, b: Lesson) {\n        const dateA = new Date(a.start);\n        const dateB = new Date(b.start);\n        return dateA.getTime() - dateB.getTime();\n      })\n  );\n\n  const last: Lesson = lessons\n    .reverse()\n    .find((l: Lesson) => l.seriesId === lesson?.seriesId ?? undefined);\n\n  const first: Lesson = lessons\n    .reverse()\n    .find((l: Lesson) => l.seriesId === lesson?.seriesId ?? undefined);\n\n  const size = lessons.length;\n\n  const [viewSeries, setViewSeries] = useState(false);\n\n  const [cache] = useState(\n    new CellMeasurerCache({\n      fixedWidth: true,\n      defaultHeight: 100,\n    })\n  );\n\n  const rowCount = lessons?.length ?? 0;\n\n  //@ts-ignore\n  const renderRow = ({ index, key, style, parent }) => {\n    return (\n      <>\n        {lessons && (\n          <CellMeasurer\n            key={key}\n            cache={cache}\n            parent={parent}\n            columnIndex={0}\n            rowIndex={index}\n          >\n            <SeriesRow style={style} tabIndex={0} color={lessons[index].color}>\n              <div style={{ width: \"50px\" }}>\n                <span />\n                <p>{index + 1}</p>\n              </div>\n              <p>{format(new Date(lessons[index].start), \"EEEE do MMMM Y\")}</p>\n              <div style={{ flex: 1, justifyContent: \"flex-end\" }}>\n                <Button\n                  onClick={() =>\n                    dispatch(\n                      actions.lessonUnlinked({\n                        key: startOfDay(\n                          new Date(lessons[index].start)\n                        ).toISOString(),\n                        id: lessons[index].seriesId,\n                      })\n                    )\n                  }\n                >\n                  <FaUnlink />\n                </Button>\n                <Button\n                  onClick={() =>\n                    dispatch(\n                      actions.lessonDeleted({\n                        key: startOfDay(\n                          new Date(lessons[index].start)\n                        ).toISOString(),\n                        id: lessons[index].id,\n                      })\n                    )\n                  }\n                >\n                  <FaTimes />\n                </Button>\n              </div>\n            </SeriesRow>\n          </CellMeasurer>\n        )}\n      </>\n    );\n  };\n\n  return (\n    <Wrapper>\n      <h3 style={{ margin: 0 }}>Series Details</h3>\n      <img\n        style={{ margin: \"20px\" }}\n        height=\"100px\"\n        src={process.env.PUBLIC_URL + \"/link_calendar.svg\"}\n        alt=\"New Lesson Icon\"\n      />\n      <Form onSubmit={(e) => e.preventDefault()}>\n        {!viewSeries && (\n          <>\n            <SeriesSpan>\n              <p>Subject</p>\n              <h3>{lesson?.subject ?? \"N/A\"}</h3>\n            </SeriesSpan>\n            <SeriesSpan>\n              <p>Series Duration</p>\n              <h3>\n                {first && last\n                  ? `${format(new Date(first.start), \"do MMMM Y\")} - ${format(\n                      new Date(last.start),\n                      \"do MMM Y\"\n                    )}`\n                  : \"N/A\"}\n              </h3>\n            </SeriesSpan>\n            <SeriesSpan>\n              <p>Time</p>\n              <h3>\n                {lesson\n                  ? `${format(new Date(lesson?.start!), \"HH:mm\")} - ${format(\n                      new Date(lesson?.end),\n                      \"HH:mm\"\n                    )}`\n                  : \"N/A\"}\n              </h3>\n            </SeriesSpan>\n            <SeriesSpan style={{ marginBottom: \"10px\" }}>\n              <p>Lessons</p>\n              <h3>{size}</h3>\n            </SeriesSpan>\n          </>\n        )}\n        {lessons && viewSeries && (\n          <ListWrapper>\n            <AutoSizer>\n              {({ width, height }) => {\n                return (\n                  <List\n                    tabIndex={0}\n                    containerStyle={{ padding: 0, margin: 0 }}\n                    deferredMeasurementCache={cache}\n                    width={width}\n                    height={height}\n                    rowHeight={cache.rowHeight}\n                    rowRenderer={renderRow}\n                    rowCount={rowCount}\n                    overscanRowCount={20}\n                  />\n                );\n              }}\n            </AutoSizer>\n          </ListWrapper>\n        )}\n        {!viewSeries ? (\n          <ButtonSpan>\n            <SubmitButton\n              type=\"button\"\n              disabled={!lesson}\n              onClick={() => {\n                lesson\n                  ? dispatch(actions.seriesDeleted(lesson.seriesId!))\n                  : void {};\n                isOpen(false);\n              }}\n            >\n              Delete Series\n            </SubmitButton>\n            <SubmitButton\n              disabled={!lessons.length}\n              type=\"button\"\n              onClick={() => setViewSeries(true)}\n            >\n              View Lessons\n            </SubmitButton>\n          </ButtonSpan>\n        ) : (\n          <SubmitButton type=\"button\" onClick={() => setViewSeries(false)}>\n            View Series\n          </SubmitButton>\n        )}\n      </Form>\n    </Wrapper>\n  );\n};\n","import React, { useState } from \"react\";\nimport { useTransition } from \"react-spring\";\nimport {\n  Wrapper,\n  ButtonBar,\n  Section,\n  Heading,\n  SubHeading,\n  CloseButton,\n  LinkedButton,\n  Button,\n  ButtonSpan,\n} from \"./style\";\nimport { Lesson } from \"../../store/types\";\nimport { useDispatch } from \"react-redux\";\nimport { actions } from \"../../store/actions\";\nimport { constants } from \"../../constants\";\nimport {\n  FaTimes,\n  FaEdit,\n  FaTrash,\n  FaQuestionCircle,\n  FaLink,\n  FaUnlink,\n} from \"react-icons/fa\";\nimport { useKeyboardEvent } from \"../../hooks/useKeyboardEvent\";\nimport { Popup } from \"../Popup\";\nimport { startOfDay, format } from \"date-fns\";\nimport { useTypedSelector } from \"../../store\";\nimport { EditLessonForm } from \"../Forms/EditLessonForm\";\nimport { SeriesForm } from \"../Forms/SeriesForm\";\n\nexport const InformationBar: React.FC<{\n  lesson: Lesson | undefined;\n}> = React.memo(({ lesson }) => {\n  const isOpen = useTypedSelector((state) => state.infoPanelOpen);\n  const color = useTypedSelector((state) => state.infoPanelColor);\n  const [isVisible, setVisibility] = useState(false);\n  const [mode, setMode] = useState(\"edit\" as \"edit\" | \"series\");\n  const transitions = useTransition(isOpen, null, {\n    from: { transform: \"translate(100%)\" },\n    enter: { transform: \"translate(0)\" },\n    leave: { transform: \"translate(100%)\" },\n    unique: true,\n    config: { duration: constants.animationDuration },\n  });\n  const isPopupOpen = useTypedSelector((state) => state.popupOpen);\n\n  useKeyboardEvent(\"Escape\", () => {\n    if (!isPopupOpen) dispatch(actions.closePanelButtonPressed());\n  });\n  const dispatch = useDispatch();\n  const yearGroup = useTypedSelector((state) =>\n    state.classes.find((c) => c.id === lesson?.class)\n  );\n  return (\n    <>\n      <Popup\n        isVisible={isVisible}\n        onClick={() => {\n          setVisibility(false);\n          dispatch(actions.popupClosed());\n        }}\n        scrollLock\n      >\n        {lesson && mode === \"edit\" ? (\n          <EditLessonForm\n            initialDate={startOfDay(new Date(lesson.start)).toISOString()}\n            lesson={lesson}\n          />\n        ) : mode === \"series\" ? (\n          <SeriesForm lesson={lesson} isOpen={setVisibility} />\n        ) : null}\n      </Popup>\n\n      {transitions.map(\n        ({ item, key, props }) =>\n          item && (\n            <Wrapper background={color} style={props} key={key}>\n              <CloseButton\n                onClick={() => dispatch(actions.closePanelButtonPressed())}\n              >\n                <FaTimes />\n              </CloseButton>\n              <img\n                src={process.env.PUBLIC_URL + \"/blackboard.svg\"}\n                alt=\"Blackboard Icon\"\n              />\n\n              <ButtonBar>\n                <Button\n                  disabled={!lesson}\n                  onClick={() => {\n                    setVisibility(true);\n                    setMode(\"edit\");\n                    dispatch(actions.popupOpened());\n                  }}\n                >\n                  <FaEdit size=\"22\" />\n                </Button>\n                <LinkedButton\n                  isLinked={lesson?.seriesId ? true : false}\n                  disabled={!lesson || !lesson.seriesId}\n                  onClick={() => {\n                    setVisibility(true);\n                    setMode(\"series\");\n                    dispatch(actions.popupOpened());\n                  }}\n                >\n                  {lesson?.seriesId ? (\n                    <FaLink size=\"22\" />\n                  ) : (\n                    <FaUnlink size=\"22\" />\n                  )}\n                </LinkedButton>\n                <Button\n                  disabled={!lesson}\n                  onClick={() =>\n                    lesson\n                      ? dispatch(\n                          actions.lessonDeleted({\n                            key: startOfDay(\n                              new Date(lesson.start)\n                            ).toISOString(),\n                            id: lesson.id,\n                          })\n                        )\n                      : void {}\n                  }\n                >\n                  <FaTrash size=\"22\" />\n                </Button>\n              </ButtonBar>\n              <Section>\n                <SubHeading>Subject</SubHeading>\n                <Heading>{lesson?.subject ?? \"N/A\"}</Heading>\n              </Section>\n              <Section>\n                <SubHeading>Date</SubHeading>\n                <Heading>\n                  {lesson?.start\n                    ? format(new Date(lesson.start), \"do MMMM Y\")\n                    : \"N/A\"}\n                </Heading>\n              </Section>\n              <Section>\n                <SubHeading>Time</SubHeading>\n                <Heading>\n                  {lesson\n                    ? `${format(new Date(lesson?.start!), \"HH:mm\")} - ${format(\n                        new Date(lesson?.end),\n                        \"HH:mm\"\n                      )}`\n                    : \"N/A\"}\n                </Heading>\n              </Section>\n              <>\n                <Section>\n                  <SubHeading>Year</SubHeading>\n                  <Heading>{yearGroup?.year ?? \"N/A\"}</Heading>\n                </Section>\n                <Section>\n                  <SubHeading>Class</SubHeading>\n                  <ButtonSpan>\n                    <Heading>{yearGroup?.group ?? \"N/A\"}</Heading>\n                  </ButtonSpan>\n                </Section>\n                <Section>\n                  <SubHeading>Students</SubHeading>\n                  <ButtonSpan>\n                    <Heading>{yearGroup?.students.length ?? \"N/A\"}</Heading>\n                    {lesson && lesson.class && (\n                      <Button>\n                        <FaQuestionCircle />\n                      </Button>\n                    )}\n                  </ButtonSpan>\n                </Section>\n              </>\n            </Wrapper>\n          )\n      )}\n    </>\n  );\n});\n","import React from \"react\";\nimport { InformationBar } from \"../../../components/InformationBar\";\nimport { useTypedSelector } from \"../../../store\";\n\nexport const SideBar = () => {\n  const focussedLesson = useTypedSelector((state) => state.focussedLesson);\n\n  return (\n    <>\n      <span style={{ position: \"relative\", display: \"flex\" }}>\n        <InformationBar lesson={focussedLesson} />\n      </span>\n    </>\n  );\n};\n","import React from \"react\";\nimport { Wrapper } from \"./style\";\nimport { Timeline } from \"../../components/Timeline\";\nimport { Schedule } from \"../../components/Schedule\";\nimport { SideBar } from \"./SideBar\";\n\nexport const AvailabilityHandler = () => {\n  return (\n    <>\n      <Wrapper>\n        <Timeline />\n        <Schedule />\n      </Wrapper>\n      <SideBar />\n    </>\n  );\n};\n","import styled from \"styled-components\";\nimport { NavLink } from \"react-router-dom\";\n\nexport const Wrapper = styled.nav`\n  background: #2296f3;\n  display: flex;\n  flex-direction: column;\n  padding: 30px 20px;\n\n  ul {\n    padding: 0;\n    margin: 0;\n    list-style: none;\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n  }\n\n  span {\n    display: flex;\n    flex-direction: column;\n  }\n  span a {\n    margin-bottom: 20px;\n  }\n  a {\n    transition: 0.3s;\n  }\n  a:hover {\n    opacity: 1;\n  }\n`;\n\nexport const Link = styled(NavLink)`\n  color: #fff;\n  opacity: 0.6;\n`;\n","import React from \"react\";\nimport { Wrapper, Link } from \"./style\";\nimport { FaRegCalendarAlt, FaUsers, FaCog } from \"react-icons/fa\";\n\nexport const SideMenu = () => {\n  return (\n    <Wrapper>\n      <ul>\n        <span>\n          <Link exact to=\"/\" activeStyle={{ opacity: \"1\" }}>\n            <FaRegCalendarAlt size=\"32\" />\n          </Link>\n          <Link to=\"/students\" activeStyle={{ opacity: \"1\" }}>\n            <FaUsers size=\"32\" />\n          </Link>\n        </span>\n        <Link to=\"/settings\" activeStyle={{ opacity: \"1\" }}>\n          <FaCog size=\"32\" />\n        </Link>\n      </ul>\n    </Wrapper>\n  );\n};\n","import React from \"react\";\r\nimport { render } from \"react-dom\";\r\nimport { store } from \"./store\";\r\nimport { Provider } from \"react-redux\";\r\nimport { Route, HashRouter } from \"react-router-dom\";\r\nimport { DndProvider } from \"react-dnd\";\r\nimport { HTML5Backend } from \"react-dnd-html5-backend\";\r\nimport { AvailabilityHandler } from \"./handlers/AvailabilityHandler\";\r\nimport { SideMenu } from \"./components/SideMenu\";\r\nimport \"./style.css\";\r\n\r\nconst App: React.FC = () => {\r\n  return (\r\n    <div className=\"App\">\r\n      <SideMenu />\r\n      <Route exact path=\"/\" component={AvailabilityHandler} />\r\n    </div>\r\n  );\r\n};\r\n\r\nconst rootElement = document.getElementById(\"root\");\r\n\r\nrender(\r\n  <Provider store={store}>\r\n    <HashRouter basename={process.env.PUBLIC_URL}>\r\n      <DndProvider backend={HTML5Backend}>\r\n        <App />\r\n      </DndProvider>\r\n    </HashRouter>\r\n  </Provider>,\r\n  rootElement\r\n);\r\n"],"sourceRoot":""}